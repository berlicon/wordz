<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="1.1" DspName="Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider" CollationLcid="1049" CollationCaseSensitive="False">
	<Header>
		<CustomData Category="ModelCapability">
			<Metadata Name="ModelCapability" Value="Default" />
		</CustomData>
		<CustomData Category="ClrTypesDbSchema" Type="DbSchema">
			<Metadata Name="ClrTypesDbSchema" Value="True" />
		</CustomData>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="False" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="False" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="80" />
		</CustomData>
		<CustomData Category="Permissions" Type="XmlPermissions">
			<Metadata Name="FileName" Value="G:\MY\WIKILEARNING\_SRC3\TRUNK\SRC\WORDZ.DATABASE\PROPERTIES\DATABASE.SQLPERMISSIONS" />
		</CustomData>
	</Header>
	<Model>
		<Element Type="ISql100DatabaseOptions" Disambiguator="1">
			<Property Name="Collation" Value="Cyrillic_General_CI_AS" />
			<Property Name="IsAnsiPaddingOn" Value="False" />
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="IsCursorDefaultScopeGlobal" Value="True" />
			<Property Name="CompatibilityMode" Value="80" />
			<Property Name="PageVerifyMode" Value="2" />
			<Property Name="ServiceBrokerOption" Value="1" />
			<Property Name="IsVardecimalStorageFormatOn" Value="False" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm].[is_editable]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="6" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv].[is_editable]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="7" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA['']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[category].[name]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="8" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="9" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="10" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="11" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="12" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="13" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_comment].[rating]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="14" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_comment].[claims_count]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="15" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[user_comment].[answer_level]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="16" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="17" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="18" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="19" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="20" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="21" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="22" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="23" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="24" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[course].[is_deleted]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="25" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="26" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="27" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="28" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="29" />
		</Element>
		<Element Type="ISql90DefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(0)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="30" />
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1035" />
			<Relationship Name="Grantee">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Disambiguator="1" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1035" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_user]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Disambiguator="1" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_part_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_site_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_get_top_20]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_verb_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_verb_type_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_verb_get_top_20]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_sound_by_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_order_get_random]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_top]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_count]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_top]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_language_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_search]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_count_sounded]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_list_unsounded_short]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_top]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_level_get_random]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_upd_status]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_tv_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_original]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_tv_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_fm_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_fm_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_original]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_text]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_get_count]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_upd]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_upd]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_verb_del_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_domain_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_verb_get_info]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_verb_get_top]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_verb_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_del]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_get_count]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_get_top]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_account_word_ins]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_article_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_article_get_by_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_category_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_word_ins_use_exist]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_category_get_list]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_clear_all]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlPermissionStatement">
			<Property Name="Permission" Value="1070" />
			<Relationship Name="Grantee">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
			<Relationship Name="Grantor">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="SecuredObject">
				<Entry>
					<References Name="[dbo].[pr_film_get]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISqlRoleMembership">
			<Relationship Name="Member">
				<Entry>
					<References Name="[wordz_user]" />
				</Entry>
			</Relationship>
			<Relationship Name="Role">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90Route" Name="[AutoCreatedLocal]">
			<Property Name="Address" Value="LOCAL" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[account]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account].[nick]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account].[email]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account].[password]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account].[is_admin]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[account].[IX_account_nick]">
			<Property Name="IsUnique" Value="True" />
			<Property Name="DoIgnoreDuplicateKey" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account].[nick]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[account_money_balance]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_balance].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_balance].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_balance].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_balance].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_balance].[last_update]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DmlTrigger" Name="[dbo].[account_money_history_on_insert]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="BodyScript">
				<Value><![CDATA[ 
    BEGIN
		declare @account_id int;
		declare @value decimal(18, 2);
		declare @currency_id int;
		declare @payment_date datetime;
		
		declare amh_cursor cursor for 
		select account_id,
			 change_date,
			 income_value,
			 currency_id
		from inserted
		
		open amh_cursor

		fetch next from amh_cursor
		into @account_id,
			@payment_date,
			@value,
			@currency_id

		while (@@FETCH_STATUS = 0)
		begin
		
    		update dbo.account_money_balance
				set value = value + @value,
					last_update = @payment_date
			where account_id = @account_id
				and currency_id = @currency_id

			if (@@ROWCOUNT = 0)
			begin
				insert into dbo.account_money_balance
					(account_id, currency_id, value, last_update)
				values (@account_id, @currency_id, @value, @payment_date)
			end

			fetch next from amh_cursor
			into @account_id,
				@payment_date,
				@value,
				@currency_id
		end

		close amh_cursor
		deallocate amh_cursor
    END]]></Value>
			</Property>
			<Property Name="IsInsertTrigger" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[change_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[income_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[last_update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[dbo].[account_money_hystory]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1099" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER [account_money_history_on_insert]&#xD;&#xA;    ON [dbo].[account_money_hystory]&#xD;&#xA;    AFTER INSERT&#xD;&#xA;    AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[account_money_hystory]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[change_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[income_value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_money_hystory].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[account_verb]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_verb].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_verb].[verb_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[account_word]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_word].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_word].[word_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[account_word].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[answer]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[exercise_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[picture_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[is_right]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="17" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="18" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[answer].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[article]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[body]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[text]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[category_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[site_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[native_language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article].[learn_language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[article_category_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article_category_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article_category_language].[category_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[article_category_language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[article_category_language].[IX_article_category_language_name]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[article_category_language].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[category]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[category].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[category].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="250" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="8" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[course]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[detailed_description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[ntext]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[picture_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[price]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[ui_langauge_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[location_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[category_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[authors]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[contacts]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[tags]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[links]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[is_editable]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[is_copied]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[is_public]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[password]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[google_advertisement]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[owner_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[course].[is_deleted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="25" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[currency]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency].[letter_code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="3" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency].[digit_code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[currency_rate]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency_rate].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency_rate].[source_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency_rate].[target_currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency_rate].[multiplier]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[currency_rate].[change_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_account_word_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_article_learn_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[article].[learn_language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_article_native_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[article].[native_language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_film_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_fm_imageUrl]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm].[image_url]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_fm_language_description]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm_language].[description]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_fm_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_fm_language_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_fm_use_media_player]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[fm].[use_media_player]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_level_correct]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[level]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[level].[correct]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_level_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[level]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[level].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_level_quiz_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[level_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[level_quiz].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_tv_imageUrl]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv].[image_url]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_tv_language_description]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[('')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv_language].[description]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_tv_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_tv_language_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(1)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_word_order_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[word_order].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_word_order_quiz_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[word_order_quiz].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90DefaultConstraint" Name="[dbo].[DF_word_quiz_language_id]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(2)]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[dbo].[word_quiz].[language_id]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[domain]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[domain_word]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain_word].[domain_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain_word].[word_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[domain_word_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain_word_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain_word_language].[domain_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[domain_word_language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[domain_word_language].[IX_domain_word_language_name]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain_word_language].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[domain_word_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_answer_text]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[module_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[ordinal_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="23" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="24" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_answer_text].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_select]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[module_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[picture_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[ordinal_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="19" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="20" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_select_text]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[module_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[ordinal_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="21" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="22" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_select_text].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_skip_text]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[module_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[ordinal_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="27" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="28" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_skip_text].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_text]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[module_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[ordinal_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="12" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[is_approved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="13" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[exercise_text_answer]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text_answer].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text_answer].[exercise_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text_answer].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text_answer].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[exercise_text_answer].[mark]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[image_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[film_category_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[film_player_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[status]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[is_editable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film].[player_code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="3000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film_category]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_category].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film_category_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_category_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_category_language].[film_category_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_category_language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[film_category_language].[IX_film_category_language_name]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_category_language].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_order].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_order].[film_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_order].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_order].[order_in_list]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="30" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film_part]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_part].[film_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_part].[number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_part].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[film_player]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_player].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[film_player].[pattern]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="2000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_money_balance_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_money_balance].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_money_balance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_money_hystory_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_money_hystory].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_money_hystory]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_verb_account]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_verb_verb]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[verb].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[verb]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_word_account]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_word_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_account_word_word]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_category]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article].[category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[category].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_category_language_category]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article_category_language].[category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[category].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_category_language_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article_category_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_language]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article].[learn_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_language1]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article].[native_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_article_site]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[article].[site_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[site].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[site]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_account]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_category]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[category].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_language]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_parent_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_course_picture]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[picture].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[picture]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_currency_rate_source_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[currency_rate].[source_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_currency_rate_target_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[currency_rate].[target_currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_domain_word_domain]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[domain_word].[domain_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[domain].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[domain]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_domain_word_language_domain]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[domain_word_language].[domain_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[domain].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[domain]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_domain_word_language_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[domain_word_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_domain_word_word]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[domain_word].[word_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_exercise_text_module]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_category_language_film_category]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[film_category].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[film_category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_category_language_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_film_category]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[film_category].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[film_category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_film_player]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_film_part_film]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[film_part].[film_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_part]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_fm_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_fm_language_fm]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[fm_language].[fm_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_fm_language_language]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_module_course]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_module_currency_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_module_parent_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_module_picture]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[picture].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[picture]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_payment_currency]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[payment].[currency_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_payment_module]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_rating_account]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[rating].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[rating]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_tv_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_tv_language_language]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_tv_language_tv]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[tv_language].[tv_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_user_comment_rates_and_claims_account_id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_user_comment_rates_and_claims_user_comment]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[user_comment_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_verb_verb_type]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[verb].[verb_type_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[verb]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[verb_type].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[verb_type]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_language_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_language_word]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_order_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_order].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_order_quiz_account]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_order_quiz].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_order_quiz_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_order_quiz].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_quiz_account]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_quiz].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90ForeignKeyConstraint" Name="[dbo].[FK_word_quiz_language]">
			<Property Name="OnUpdateAction" Value="1" />
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[dbo].[word_quiz].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[fm]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[image_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[use_media_player]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[is_editable]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="6" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[fm_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_language].[fm_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_language].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[fm_language].[IX_fm_language_name]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[fm_language].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[fm_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_order].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_order].[fm_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_order].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[fm_order].[order_in_list]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="29" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_get_currency_rate]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate].[@source_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate].[@target_currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rate].[multiplier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rate].[source_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rate].[target_currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency_rate].[change_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate].[@onDate]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	-- Получаем множитель для преобразования валют
	declare @currencyRateMultiplier decimal(18, 8)
	if (@source_currency <> @target_currency)
	begin
		select top 1 @currencyRateMultiplier = cr.multiplier
		from dbo.currency_rate cr
		where cr.source_currency_id = @source_currency
			and cr.target_currency_id = @target_currency
			and cr.change_date <= @onDate
		order by cr.change_date desc
					
		-- Если не нашли напрямую, то ищем в обратную сторону
		if (@currencyRateMultiplier is null)
		begin
			select top 1 @currencyRateMultiplier = 1.0 / cr.multiplier
			from dbo.currency_rate cr
			where cr.source_currency_id = @target_currency
				and cr.target_currency_id = @source_currency
				and cr.change_date <= @onDate
			order by cr.change_date desc
		end
	end
	else
	begin
		select @currencyRateMultiplier = 1.0;
	end
	
	RETURN @currencyRateMultiplier;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="48" />
							<Property Name="Length" Value="1092" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- Description: &#xD;&#xA;-- Change Date: 01.06.2013&#xD;&#xA;&#xD;&#xA;CREATE FUNCTION [dbo].[fn_get_currency_rate]&#xD;&#xA;(&#xD;&#xA;&#x9;@source_currency int,&#xD;&#xA;&#x9;@target_currency int,&#xD;&#xA;&#x9;@onDate datetime&#xD;&#xA;)&#xD;&#xA;RETURNS decimal(18, 8)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_get_currency_rate].[@source_currency]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_get_currency_rate].[@target_currency]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_get_currency_rate].[@onDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Property Name="Scale" Value="8" />
						<Property Name="Precision" Value="18" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[decimal]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_all_childs_approved]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_all_childs_approved].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @non_approved_count int;
	
	select @non_approved_count = COUNT(*)
	from dbo.module m
	where m.course_id = @course_id
		and m.is_approved = 0
	
	if (@non_approved_count > 0)
		return convert(bit, 0);

	select @non_approved_count = COUNT(*)
	from dbo.exercise_answer_text ex
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ex.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);


	select @non_approved_count = COUNT(*)
	from dbo.exercise_select ex
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ex.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);

	select @non_approved_count = COUNT(*)
	from dbo.exercise_select_text ex
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ex.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);

	select @non_approved_count = COUNT(*)
	from dbo.exercise_skip_text ex
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ex.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);

	select @non_approved_count = COUNT(*)
	from dbo.exercise_text ex
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ex.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);


	select @non_approved_count = COUNT(*)
	from dbo.answer ans
	left join dbo.exercise_select ex
	on ex.id = ans.exercise_id
	left join module m
	on m.id = ex.module_id
	where m.course_id = @course_id
		and ans.is_approved = 0

	if (@non_approved_count > 0)
		return convert(bit, 0);

	-- Если все Ок, то возвращаем 1
	return convert(bit, 1);
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1874" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_all_childs_approved]&#xD;&#xA;(&#xD;&#xA;&#x9;@course_id int&#xD;&#xA;)&#xD;&#xA;RETURNS bit&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_all_childs_approved].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_course_allowed_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_course_allowed_approve].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end
	
	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="315" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_course_allowed_approve]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@course_id int&#xD;&#xA;)&#xD;&#xA;RETURNS bit&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_course_allowed_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_course_allowed_approve].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_exercise_allowed_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end
	
	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="341" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_exercise_allowed_approve]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_type int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;)&#xD;&#xA;RETURNS INT&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_exercise_allowed_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_exercise_allowed_approve].[@exercise_type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_exercise_allowed_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_module_allowed_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_module_allowed_approve].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end
	
	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="315" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_module_allowed_approve]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@module_id int&#xD;&#xA;)&#xD;&#xA;RETURNS INT&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_module_allowed_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_module_allowed_approve].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_show_unapproved_course]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_course].[@account_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_course].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end
	
	if (@retVal = 0)
	begin
		select @retVal = convert(bit, (select COUNT(*)
										from dbo.course
										where id = @course_id
											and owner_id = @account_id))
	end

	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="501" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_show_unapproved_course]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@course_id int&#xD;&#xA;)&#xD;&#xA;RETURNS bit&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_course].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_course].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_show_unapproved_exercise]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise].[@exercise_type]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end

	if (@retVal = 0)
	begin
		if @exercise_type = 1
			select @retVal = convert(bit, (select COUNT(*)
										from dbo.exercise_text e
										left join dbo.module m
										on m.id = e.module_id
										left join dbo.course c
										on m.course_id = c.id
										where e.id = @exercise_id
											and c.owner_id = @account_id))
		if @exercise_type = 2
			select @retVal = convert(bit, (select COUNT(*)
										from dbo.exercise_select e
										left join dbo.module m
										on m.id = e.module_id
										left join dbo.course c
										on m.course_id = c.id
										where e.id = @exercise_id
											and c.owner_id = @account_id))
		if @exercise_type = 3
			select @retVal = convert(bit, (select COUNT(*)
										from dbo.exercise_answer_text e
										left join dbo.module m
										on m.id = e.module_id
										left join dbo.course c
										on m.course_id = c.id
										where e.id = @exercise_id
											and c.owner_id = @account_id))
		if @exercise_type = 4
			select @retVal = convert(bit, (select COUNT(*)
										from dbo.exercise_select_text e
										left join dbo.module m
										on m.id = e.module_id
										left join dbo.course c
										on m.course_id = c.id
										where e.id = @exercise_id
											and c.owner_id = @account_id))
		if @exercise_type = 5
			select @retVal = convert(bit, (select COUNT(*)
										from dbo.exercise_skip_text e
										left join dbo.module m
										on m.id = e.module_id
										left join dbo.course c
										on m.course_id = c.id
										where e.id = @exercise_id
											and c.owner_id = @account_id))
	end

	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="2025" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_show_unapproved_exercise]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_type int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;)&#xD;&#xA;RETURNS bit&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_exercise].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_exercise].[@exercise_type]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_exercise].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100ScalarFunction" Name="[dbo].[fn_is_show_unapproved_module]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_module].[@account_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_module].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	declare @retVal bit;
	
	select @retVal = ISNULL(is_admin, 0)
	from dbo.account
	where id = @account_id

	if (@retVal is null)
	begin
		select @retVal = 0
	end
	
	if (@retVal = 0)
	begin
		select @retVal = convert(bit, (select COUNT(*)
										from dbo.module m
										left join dbo.course c
										on m.course_id = c.id
										where m.id = @module_id
											and c.owner_id = @account_id))
	end

	return @retVal;
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="574" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[fn_is_show_unapproved_module]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@module_id int&#xD;&#xA;)&#xD;&#xA;RETURNS INT&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_module].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[fn_is_show_unapproved_module].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="ISql90TypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[language].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[level]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[sentence]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="150" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[answer1]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[answer2]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[answer3]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[correct]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[level_quiz]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level_quiz].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level_quiz].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level_quiz].[nick]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level_quiz].[result]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[level_quiz].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[module]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[course_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[detailed_description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[ntext]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[picture_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[price]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[currency_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[tags]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[links]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[order_in_course]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="9" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[parent_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[exercise_max_number]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="10" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[is_approved]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[module].[is_deleted]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="11" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[payment]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[module_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[payment_value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[currency_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[payment].[payment_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[picture]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[picture].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[picture].[data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_account]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_account_verb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account_verb].[account_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account_verb].[verb_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_account_word]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account_word].[account_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account_word].[word_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[account_word].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_article]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[article].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_article_category_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[article_category_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[article_category_language].[category_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_category]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[category].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_course]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[course].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_currency]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_currency_rate]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[currency_rate].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[currency_rate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_domain]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_domain_word]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain_word].[domain_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain_word].[word_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_domain_word_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain_word_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[domain_word_language].[domain_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[domain_word_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_exercise_text]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[exercise_text].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_film]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_film_category]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_category].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_film_category_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_category_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_category_language].[film_category_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_film_part]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_part].[film_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_part].[number]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_part]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_film_player]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[film_player].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_fm]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[fm].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_fm_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[fm_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[fm_language].[fm_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[language].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_level]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[level].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[level]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_level_quiz]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[level_quiz].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[level_quiz]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_module]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[module].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_payment]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[payment].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_picture]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[picture].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[picture]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_site]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[site].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[site]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_tv]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[tv].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_tv_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[tv_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[tv_language].[tv_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_user_comment]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_comment].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_user_comment_rates_and_claims]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[user_comment_rates_and_claims].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_verb]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[verb].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[verb]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_verb_type]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[verb_type].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[verb_type]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_word]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_word_language]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_language].[language_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_language].[word_id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_word_order]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_order].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_word_order_quiz]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_order_quiz].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100PrimaryKeyConstraint" Name="[dbo].[PK_word_quiz]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_quiz].[id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT id, nick, email, password, is_admin
FROM account
WHERE nick = @nick
AND (password IS NULL OR password = @password)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[email]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[is_admin]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_get].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_get].[@password]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_get].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_get].[@password]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="235" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_account_get&#xD;&#xA;(&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @password nvarchar(20) = NULL&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_get_count]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT count(*) as cnt
FROM account]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="87" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_account_get_count&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

INSERT INTO account
(nick, email, password)
VALUES (@nick, @email, @password)

SELECT SCOPE_IDENTITY()]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[email]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_ins].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_ins].[@email]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_ins].[@password]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_ins].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_ins].[@email]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_ins].[@password]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="250" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_account_ins&#xD;&#xA;(&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @email nvarchar(50) = NULL,&#xD;&#xA;    @password nvarchar(20) = NULL&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_money_balance_lst]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	select 
		amb.currency_id 'currency_id'
		, amb.value 'value'
		, amb.last_update 'last_update'
		, cs.name 'currency_name'
		, cs.letter_code 'letter_code'
		, cs.digit_code 'digit_code'
	from dbo.account_money_balance amb
	left join dbo.currency cs
	on cs.id = amb.currency_id
	where amb.account_id = @account_id
		and amb.value <> 0]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_money_balance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[last_update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[letter_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[digit_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_balance_lst].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[value]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_balance_lst].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="48" />
				<Property Name="Length" Value="472" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- возвращает денежный баланс по каждой валюте&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_account_money_balance_lst]&#xD;&#xA;&#x9;@account_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_money_income_outcome]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		begin transaction 

		insert into dbo.account_money_hystory
			(account_id, currency_id, income_value, change_date)
		values (@account_id, @currency_id, @value, @payment_date)

		select @result_id = SCOPE_IDENTITY();
		commit
	end try
	begin catch
		rollback
		select @result_id = -1
	end catch]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_money_hystory]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[income_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[change_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_income_outcome].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_income_outcome].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_income_outcome].[@value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_income_outcome].[@payment_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_money_income_outcome].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_income_outcome].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_income_outcome].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_income_outcome].[@value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_income_outcome].[@payment_date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_money_income_outcome].[@result_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="139" />
				<Property Name="Length" Value="628" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- description: хранимка для пополнения средств на счете и сохранения &#xD;&#xA;--      в истории прихода / расхода&#xD;&#xA;-- change date: 30-05-2013&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_account_money_income_outcome]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@currency_id int,&#xD;&#xA;&#x9;@value decimal(18, 2),&#xD;&#xA;&#x9;@payment_date datetime,&#xD;&#xA;&#x9;@result_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_upd]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

UPDATE account
SET nick = @nick, email = @email, password = @password
WHERE id=@id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_upd].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[email]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_upd].[@email]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_upd].[@password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_upd].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_upd].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_upd].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_upd].[@email]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_upd].[@password]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="242" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_account_upd&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @email nvarchar(50) = NULL,&#xD;&#xA;    @password nvarchar(20) = NULL&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_verb_del_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DELETE FROM account_verb
WHERE account_id = @account_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_verb_del_list].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_verb_del_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="134" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_verb_del_list&#xD;&#xA;(&#xD;&#xA;    @account_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_verb_get_info]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
DECLARE @iKnow int
DECLARE @percentOfPopular int
DECLARE @percentOfTotal int

SET @iKnow = (SELECT COUNT(*) FROM account_verb
WHERE account_id = @account_id)

SET @percentOfPopular = (SELECT CEILING(100 * @iKnow / COUNT(*)) FROM verb
WHERE popular = 1)

IF (@percentOfPopular > 100) SET @percentOfPopular = 100

SET @percentOfTotal = (SELECT CEILING(100 * @iKnow / COUNT(*)) FROM verb)

SELECT
    @iKnow AS iKnow,
    @percentOfPopular AS percentOfPopular,
    @percentOfTotal AS percentOfTotal]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_verb_get_info].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[popular]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_verb_get_info].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="588" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_verb_get_info&#xD;&#xA;(&#xD;&#xA;    @account_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_verb_get_top]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 20 a.nick as nick, COUNT(verb_id) as [count]
FROM account_verb av
INNER JOIN account a
ON a.[id] = av.account_id
GROUP BY a.nick
ORDER BY COUNT(verb_id) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="223" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_verb_get_top&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_verb_get_top_20]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 20 a.nick as nick, COUNT(verb_id) as [count]
FROM account_verb av
INNER JOIN account a
ON a.[id] = av.account_id
GROUP BY a.nick
ORDER BY COUNT(verb_id) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="226" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_verb_get_top_20&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_verb_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

IF (NOT EXISTS(SELECT * FROM account_verb WHERE account_id = @account_id AND verb_id = @verb_id))
    BEGIN
        INSERT INTO account_verb (account_id, verb_id)
        VALUES (@account_id, @verb_id)
    END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_verb_ins].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_verb_ins].[@verb_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_verb_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_verb_ins].[@verb_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="305" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_verb_ins&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @verb_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_del]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DELETE FROM account_word
WHERE account_id = @account_id
AND word_id = @word_id
AND language_id = @language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_del].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_del].[@word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_del].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_del].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_del].[@word_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_del].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="227" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_del&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @word_id int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT account_id FROM account_word
WHERE account_id = @account_id
AND word_id = @word_id
AND language_id = @language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get].[@word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get].[@word_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="238" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_get&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @word_id int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_get_count]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT COUNT(*) AS [count] FROM account_word
WHERE account_id = @account_id AND language_id = @language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get_count].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get_count].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get_count].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get_count].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="209" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_get_count&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT w.id, wl.text AS original
FROM word w
INNER JOIN account_word aw
ON aw.word_id = w.id
INNER JOIN word_language wl
ON wl.word_id = w.id
WHERE aw.account_id = @account_id
AND aw.language_id = @language_id
AND wl.language_id = @language_id
ORDER BY wl.text]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get_list].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get_list].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="370" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_get_list&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_get_top]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 20 a.nick as nick, COUNT(word_id) as [count]
FROM account_word aw
INNER JOIN account a
ON a.[id] = aw.account_id
WHERE aw.language_id = @language_id
GROUP BY a.nick
ORDER BY COUNT(word_id) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_get_top].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_get_top].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="288" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_get_top&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_get_top_20]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 20 a.nick as nick, COUNT(word_id) as [count]
FROM account_word aw
INNER JOIN account a
ON a.[id] = aw.account_id
GROUP BY a.nick
ORDER BY COUNT(word_id) DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="226" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_get_top_20&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_account_word_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

IF (NOT EXISTS(SELECT * FROM account_word WHERE account_id = @account_id AND word_id = @word_id AND language_id = @language_id))
    BEGIN
        INSERT INTO account_word (account_id, word_id, language_id)
        VALUES (@account_id, @word_id, @language_id)
    END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_ins].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_ins].[@word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_account_word_ins].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_ins].[@word_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_account_word_ins].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="386" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_account_word_ins&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @word_id int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_answer_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @exercise_id int;
	select @exercise_id = exercise_id
	from dbo.answer where id = @answer_id
	
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 2, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.answer
			set
				dbo.answer.is_right = child.is_right
				, dbo.answer.picture_id = child.picture_id
				, dbo.answer.[text] = child.[text]
			from dbo.answer
			inner join dbo.answer child
			on child.parent_id = dbo.answer.id
			where 
				dbo.answer.id = @answer_id
				and dbo.answer.parent_id is null
				and child.id is not null
			
			delete from dbo.answer 
			where parent_id = @exercise_id
			
			update dbo.answer
			set
				is_approved = 1
			where
				id = @exercise_id

			commit
			select @result_id = 0;
			return;
		end try
		begin catch
			rollback 
			select @result_id = -2
			return;
		end catch
	end

	select @result_id = -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_approve].[@answer_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_approve].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_approve].[@answer_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_approve].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1036" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_answer_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@answer_id int,&#xD;&#xA;&#x9;@result_id int output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_answer_del]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM answer
WHERE id = @answer_id
	or parent_id = @answer_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_del].[@answer_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_del].[@answer_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="132" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_answer_del]&#xD;&#xA;&#x9;(@answer_id int)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_answer_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO answer
([exercise_id], [text], [picture_id], [is_right], [is_approved], [parent_id])
VALUES (@exercise_id, @text, @picture_id, @is_right, 0, null)

SELECT SCOPE_IDENTITY()]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_ins].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_ins].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_ins].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_ins].[@is_right]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_ins].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_ins].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_ins].[@is_right]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="324" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_answer_ins]&#xD;&#xA;&#x9;(&#xD;&#xA;&#x9;@exercise_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@picture_id int = null,&#xD;&#xA;&#x9;@is_right bit&#xD;&#xA;&#x9;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_answer_select_get_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT ISNULL(a.[parent_id], a.[id]) 'id'
		, a.[exercise_id]
		, a.[text]
		, a.[picture_id]
		, a.[is_right]
	FROM answer a
	WHERE a.[exercise_id] = @exercise_id
		--and
		--	(
		--		dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 0
		--		and e.parent_id is null
		--		or
		--		(
		--			dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 1
		--			and not exists (
		--					select innerEx.id
		--					from dbo.exercise_select_text innerEx
		--					where innerEx.parent_id = e.id
		--				)
		--		)
		--	)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_select_get_list].[@exercise_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_select_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_select_get_list].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="638" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_answer_select_get_list]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_answer_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
if (EXISTS(select id from [dbo].[answer] where parent_id = @answer_id and is_approved = 0))
begin
	update [dbo].[answer]
	set
		[exercise_id] = @exercise_id,
		[text] = @text,
		[picture_id] = @picture_id,
		[is_right] = @is_right
	where parent_id = @answer_id and is_approved = 0
end
else
begin
	insert into [dbo].[answer]
		([exercise_id],
		[text],
		[picture_id],
		[is_right] ,
		[is_approved],
		parent_id)
	values (
		@exercise_id,
		@text,
		@picture_id,
		@is_right,
		0,
		@answer_id
	);
end
	select @result_id = @answer_id
	end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@answer_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@answer_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@is_right]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_answer_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="748" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_answer_upd]&#xD;&#xA;&#x9;(@answer_id int,&#xD;&#xA;&#x9;@exercise_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@picture_id int = null,&#xD;&#xA;&#x9;@is_right bit,&#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_article_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT id, title, category_id
FROM article
WHERE native_language_id = @native_language_id
AND learn_language_id = @learn_language_id
ORDER BY [order]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[title]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_article_get].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_article_get].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[order]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_article_get].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_article_get].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="262" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_article_get&#xD;&#xA;(&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_article_get_by_id]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT a.title, a.body, s.url as site_url
FROM article a
inner join site s
on a.site_id = s.id
where a.id = @id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[article]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[site]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[site_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[site].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[title]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[body]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[site].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_article_get_by_id].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_article_get_by_id].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="185" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_article_get_by_id&#xD;&#xA;(&#xD;&#xA;    @id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_category_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT category_id AS id, [name]
FROM article_category_language
WHERE language_id = @language_id
ORDER BY category_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_category_get].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_category_get].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="194" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_category_get&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_course_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_course_allowed_approve(@account_id, @course_id) = 1)
	begin
		begin transaction;
		begin try

			update dbo.course
			set
				dbo.course.authors = child.authors,
				dbo.course.category_id = child.category_id,
				dbo.course.contacts = child.contacts,
				dbo.course.currency_id = child.currency_id,
				dbo.course.[description] = child.[description],
				dbo.course.detailed_description = child.[detailed_description],
				dbo.course.google_advertisement = child.google_advertisement,
				dbo.course.is_editable = child.is_editable,
				dbo.course.is_copied = child.is_copied,
				dbo.course.is_public = child.is_public,
				dbo.course.links = child.links,
				dbo.course.location_id = child.location_id,
				dbo.course.name = child.name,
				dbo.course.[password] = child.[password],
				dbo.course.picture_id = child.picture_id,
				dbo.course.price = child.price,
				dbo.course.tags = child.tags,
				dbo.course.ui_langauge_id = child.ui_langauge_id,
				dbo.course.url = child.url,
				dbo.course.is_deleted = child.is_deleted
			from dbo.course
			inner join dbo.course child
			on child.parent_id = dbo.course.id
			where 
				dbo.course.id = @course_id
				and dbo.course.parent_id is null
				and child.id is not null

			-- удаляем дочерние записи
			delete from [dbo].[course] 
			where parent_id = @course_id

			update dbo.course
			set
				is_approved = 1
			where 
				id = @course_id

			-- утверждаем модули
			declare module_cursor cursor
			for
			select m.id
			from [dbo].[module] m
			where m.course_id = @course_id
				and m.parent_id is null

			declare @module_approve_result int;
			declare @module_id int;

			open module_cursor

			fetch next from module_cursor
			into @module_id

			while (@@FETCH_STATUS = 0)
			begin
				
				exec dbo.pr_module_approve 
					@account_id = @account_id, 
					@module_id = @module_id,
					@result_id = @module_approve_result output

				if (@module_approve_result < 0)
				begin
					raiserror('Cannot approve module!', 16, 1);
				end

				fetch next from module_cursor
				into @module_id
			end

			commit
			return 0;
		end try
		begin catch
			rollback
			select ERROR_MESSAGE();
			return -2;
		end catch		
	end

	return -1;

	close module_cursor
	deallocate module_cursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_course_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_approve].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_approve].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="31" />
				<Property Name="Length" Value="2466" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- аппрув изменений для курса&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_course_approve]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@course_id int&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_course_delete]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	DECLARE @RC int
	DECLARE @number uniqueidentifier
	DECLARE @name nvarchar(100)
	DECLARE @description nvarchar(300)
	DECLARE @detailed_description nvarchar(max)
	DECLARE @picture_id int
	DECLARE @currency_id int
	DECLARE @price decimal(18,2)
	DECLARE @ui_langauge_id int
	DECLARE @location_id int
	DECLARE @category_id int
	DECLARE @url varchar(100)
	DECLARE @authors nvarchar(1000)
	DECLARE @contacts nvarchar(1000)
	DECLARE @tags nvarchar(1000)
	DECLARE @links nvarchar(4000)
	DECLARE @is_editable bit
	DECLARE @is_copied bit
	DECLARE @is_public bit
	DECLARE @password nvarchar(100)
	DECLARE @google_advertisement nvarchar(max)
	DECLARE @is_approved bit
	DECLARE @result_id int

	select
		@number = c.number
		,@name = c.name
		,@description = c.[description]
		,@detailed_description = c.[detailed_description]
		,@picture_id = c.picture_id
		,@currency_id = c.currency_id
		,@price = c.price
		,@ui_langauge_id = c.ui_langauge_id
		,@location_id = c.location_id
		,@category_id = c.category_id
		,@url = c.url
		,@authors = c.authors
		,@contacts = c.contacts
		,@tags = c.tags
		,@links = c.links
		,@is_editable = c.is_editable
		,@is_copied = c.is_copied 
		,@is_public = c.is_public
		,@password = c.[password]
		,@google_advertisement = c.google_advertisement
		,@is_approved = c.is_approved
	from dbo.course c
	where
	(
		c.[id] = @course_id
		or c.[parent_id] = @course_id
	)
	and 
	(
		not exists (
					select innerCourse.id
					from dbo.course innerCourse
					where innerCourse.parent_id = c.id
				)
	)
	-- TODO: Set parameter values here.

	EXECUTE @RC = [dbo].[pr_course_update] 
	   @account_id
	  ,@course_id
	  ,@number
	  ,@name
	  ,@description
	  ,@detailed_description
	  ,@picture_id
	  ,@currency_id
	  ,@price
	  ,@ui_langauge_id
	  ,@location_id
	  ,@category_id
	  ,@url
	  ,@authors
	  ,@contacts
	  ,@tags
	  ,@links
	  ,@is_editable
	  ,@is_copied
	  ,@is_public
	  ,@password
	  ,@google_advertisement
	  ,@is_approved
	  ,@result_id OUTPUT

	update dbo.course
	set
		is_deleted = 1
	where
		parent_id = @course_id
		and is_approved = 0]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_delete].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_delete].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_delete].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_delete].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2247" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_course_delete]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@course_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_course_details_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

declare @is_show_unapproved bit;
select @is_show_unapproved = [dbo].[fn_is_show_unapproved_course](@account_id, @course_id)

select @course_id 'id'
      ,c.[number]
      ,c.[name]
      ,c.[description]
      ,c.[detailed_description]
      ,c.[picture_id]
	  ,c.[currency_id]
      ,c.[price]
      ,c.[ui_langauge_id]
      ,c.[location_id]
      ,c.[category_id]
      ,c.[url]
      ,c.[authors]
      ,c.[contacts]
      ,c.[tags]
      ,c.[links]
      ,c.[is_editable]
      ,c.[is_copied]
      ,c.[is_public]
      ,c.[password]
      ,c.[google_advertisement]
      ,c.[is_approved]
	  ,c.owner_id
      ,convert(bit, (
					select case when isnull(SUM(m.price), 0) = 0 then 1 else 0 end
					from dbo.module m
					left join dbo.payment pt
					on pt.module_id = m.id
						and pt.account_id = @account_id
					where pt.id is null
						and m.course_id = @course_id
						and m.parent_id is null
						
					)
				) 'is_buyed_by_current_user'
      ,convert(float, (
					select top 1 (rs.value)
					from dbo.rating rs 
					where account_id is null
						and c.number = rs.target_element)
						) 'rate_by_current_user'
	  ,lang.name 'ui_langauge_name'
	  ,cat.name 'category_name'
	  ,cur.name 'currency_name'
	  ,dbo.fn_is_all_childs_approved(@course_id) 'is_all_childs_approved'
	  ,(select top 1 u.[password]
		from user_password_for_course u
		where u.[user_id] = @account_id
			and u.course_id = @course_id) 'stored_password_by_user'
from [dbo].[course] c

left join [dbo].[language] lang
	on lang.id = c.[ui_langauge_id]

left join [dbo].[article_category_language] cat
	on cat.category_id = c.category_id
	and cat.language_id = c.ui_langauge_id
left join [dbo].[currency] cur
	on cur.id = c.currency_id

where 
	(
		c.[id] = @course_id
		or c.[parent_id] = @course_id
	)
	and 
	(
		@is_show_unapproved = 0
		and is_approved = 1
		and parent_id is null
		or
		(
			@is_show_unapproved = 1
			and not exists (
					select innerCourse.id 
					from dbo.course innerCourse
					where innerCourse.parent_id = c.id
				)
		)
	)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_details_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_details_get].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[article_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_all_childs_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_details_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_details_get].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="106" />
				<Property Name="Length" Value="2328" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.20&#xD;&#xA;-- Description: хранимая процедура, которая возвращает&#xD;&#xA;--  курс по его id&#xD;&#xA;&#xD;&#xA;create procedure [dbo].[pr_course_details_get]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@course_id int&#xD;&#xA;)&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_course_get_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

	declare @is_show_unapproved bit;
	
	SELECT case when course.parent_id is null then course.id else course.parent_id end 'id'
		, course.authors
		, course.category_id 
		, course.contacts
		, course.currency_id
		, course.[description]
		, course.detailed_description
		, course.google_advertisement
		, course.is_approved
		, course.is_copied
		, course.is_editable
		, course.is_public
		, course.links
		, course.location_id
		, course.name
		, course.number
		, course.[password]
		, course.picture_id
		, course.price
		, course.tags
		, course.ui_langauge_id
		, course.url
		, course.parent_id 
		, category.name as category_name
		, lang.name as 'ui_langauge_name'
		, course.owner_id
		, cur.name 'currency_name'
	FROM course
	INNER JOIN category ON course.category_id = category.id
	left join [dbo].[language] lang on lang.id = [ui_langauge_id]
	left join [dbo].currency cur on cur.id = course.currency_id
	WHERE is_public = @is_public
	and 
	(
		[dbo].[fn_is_show_unapproved_course](@account_id, course.id) = 0
		and is_approved = 1
		and parent_id is null
		or
		(
			[dbo].[fn_is_show_unapproved_course](@account_id, course.id) = 1
			and not exists (
					select innerCourse.id 
					from dbo.course innerCourse
					where innerCourse.parent_id = course.id
				)
		)
	)
	ORDER BY course.id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[category].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[category].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_get_list].[@is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_get_list].[@is_public]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1439" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [pr_course_get_list]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@is_public bit&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_course_update]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
if (EXISTS(select id from [dbo].[course] where parent_id = @course_id and is_approved = 0))
begin
	update [dbo].[course]
	set
		number = @number 
		,name = @name 
		,[description] = @description 
		,detailed_description = @detailed_description 
		,picture_id = case when @picture_id = -1 then null
							when @picture_id is not null then @picture_id
						else picture_id end
		,currency_id = @currency_id
		,price = @price 
		,ui_langauge_id = @ui_langauge_id 
		,location_id = @location_id 
		,category_id = @category_id 
		,url = @url 
		,authors = @authors 
		,contacts = @contacts 
		,tags = @tags 
		,links = @links 
		,is_editable = @is_editable 
		,is_copied = @is_copied 
		,is_public = @is_public 
		,[password] = @password 
		,google_advertisement = @google_advertisement 
		--,is_approved = @is_approved 
	where parent_id = @course_id
		 and is_approved = 0
	select @result_id = @course_id
end
else
begin
	declare @parent_id int;
	select @parent_id = case 
							when @course_id > 0 then @course_id 
							when @course_id = 0 then null
							else -1 
						end;

	declare @parent_picture_id int;
	declare @parent_number uniqueidentifier;
	
	if (@parent_id is not null)
	begin
		select 
			@parent_picture_id = picture_id
			,@parent_number = number
		from dbo.course
		where id = @course_id
	end
	else
	begin
		set @parent_number = NEWID();
		set @parent_picture_id = null;
	end

	insert into [dbo].[course]
		(number ,name ,[description]
		,detailed_description ,picture_id ,currency_id 
		,price ,ui_langauge_id ,location_id
		,category_id ,url ,authors ,contacts
		,tags ,links ,is_editable ,is_copied
		,is_public ,[password] ,google_advertisement
		,is_approved ,parent_id, owner_id
		)
	values (
		@parent_number 
		,@name 
		,@description 
		,@detailed_description 
		,case when @picture_id > 0 then @picture_id
				else @parent_picture_id end
		,@currency_id
		,@price 
		,@ui_langauge_id 
		,@location_id 
		,@category_id 
		,@url 
		,@authors 
		,@contacts 
		,@tags 
		,@links 
		,@is_editable 
		,@is_copied 
		,@is_public 
		,@password 
		,@google_advertisement 
		,0
		,@parent_id
		,@account_id
	)
	select @result_id = case
							when @parent_id is null then SCOPE_IDENTITY()
							else @course_id
						end;
end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@ui_langauge_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@location_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@authors]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@contacts]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@is_copied]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@is_public]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@google_advertisement]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@result_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_course_update].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="300" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@detailed_description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[ntext]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@price]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@ui_langauge_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@location_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@category_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@authors]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@contacts]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@tags]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@links]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@is_editable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@is_copied]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@is_public]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@password]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@google_advertisement]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@is_approved]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_course_update].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="105" />
				<Property Name="Length" Value="3086" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.20&#xD;&#xA;-- Description: хранимая процедура, которая обновляет&#xD;&#xA;--  курс по его id&#xD;&#xA;&#xD;&#xA;create procedure [dbo].[pr_course_update]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int&#xD;&#xA;&#x9;,@course_id int&#xD;&#xA;&#x9;,@number uniqueidentifier&#xD;&#xA;&#x9;,@name nvarchar(100)&#xD;&#xA;&#x9;,@description nvarchar(300)&#xD;&#xA;&#x9;,@detailed_description ntext&#xD;&#xA;&#x9;,@picture_id int = null&#xD;&#xA;&#x9;,@currency_id int&#xD;&#xA;&#x9;,@price decimal(18,2)&#xD;&#xA;&#x9;,@ui_langauge_id int&#xD;&#xA;&#x9;,@location_id int = null&#xD;&#xA;&#x9;,@category_id int&#xD;&#xA;&#x9;,@url varchar(100)&#xD;&#xA;&#x9;,@authors nvarchar(1000)&#xD;&#xA;&#x9;,@contacts nvarchar(1000)&#xD;&#xA;&#x9;,@tags nvarchar(1000)&#xD;&#xA;&#x9;,@links nvarchar(4000)&#xD;&#xA;&#x9;,@is_editable bit&#xD;&#xA;&#x9;,@is_copied bit&#xD;&#xA;&#x9;,@is_public bit&#xD;&#xA;&#x9;,@password nvarchar(100) = null&#xD;&#xA;&#x9;,@google_advertisement nvarchar(max)&#xD;&#xA;&#x9;,@is_approved bit&#xD;&#xA;&#x9;,@result_id int output&#xD;&#xA;)&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_currency_lst]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT *
	from dbo.currency c]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="79" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_currency_lst]&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_domain_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT d.[id], (dwl.[name] + ' (' + CAST(COUNT(dw.word_id) AS VARCHAR(10)) + ')') AS [name]
FROM domain d
INNER JOIN domain_word_language dwl
ON dwl.domain_id = d.id AND dwl.language_id = @language_id
LEFT JOIN domain_word dw 
ON d.[id] = dw.domain_id
GROUP BY dw.domain_id, d.[id], dwl.[name]
ORDER BY d.[id]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[domain]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word_language].[domain_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_domain_get].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word].[domain_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word_language].[name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word].[word_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_domain_get].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="388" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_domain_get&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_answer_text_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 3, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.exercise_answer_text
			set
				dbo.exercise_answer_text.[description] = child.[description]
				,dbo.exercise_answer_text.name = child.name
				--,dbo.exercise_answer_text.ordinal_number = child.ordinal_number
				,dbo.exercise_answer_text.[text] = child.[text]
			from dbo.exercise_answer_text
			inner join dbo.exercise_answer_text child
			on child.parent_id = dbo.exercise_answer_text.id
			where 
				dbo.exercise_answer_text.id = @exercise_id
				and dbo.exercise_answer_text.parent_id is null
				and child.id is not null
			
			delete from dbo.exercise_answer_text 
			where parent_id = @exercise_id
			
			update dbo.exercise_answer_text
			set
				is_approved = 1
			where
				id = @exercise_id

			commit
			select 0;
			return;
		end try
		begin catch
			rollback 
			select -2
			return;
		end catch
	end

	select -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_approve].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1104" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_answer_text_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_answer_text_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @is_show_unapproved bit;
	select @is_show_unapproved = dbo.fn_is_show_unapproved_exercise(@account_id, 3, @exercise_id);

	SELECT
		@exercise_id 'id'
		, e.[name]
		, e.[description]
		, e.[module_id]
		, e.[text]
		, e.[ordinal_number]
		, e.[is_approved]
		, e.[parent_id]
	FROM exercise_answer_text e
	WHERE 
		(
			e.[id] = @exercise_id
			or e.parent_id = @exercise_id
		)
		and 
		(
			@is_show_unapproved = 0
			and is_approved = 1
			and parent_id is null
			or
			(
				@is_show_unapproved = 1
				and not exists (
						select innerEx.id 
						from dbo.[exercise_answer_text] innerEx
						where innerEx.parent_id = e.id
					)
			)
		)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="784" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_answer_text_get]&#xD;&#xA;&#x9;@exercise_id int,&#xD;&#xA;&#x9;@account_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_answer_text_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
DECLARE @ordinal_number int;
SET @ordinal_number=(SELECT exercise_max_number FROM module WHERE id = @module_id) + 1;
INSERT INTO exercise_answer_text
([name], [description], [module_id], [text], [ordinal_number], [parent_id], [is_approved])
VALUES (@name, @description, @module_id, @text, @ordinal_number, null, 0);
UPDATE module SET exercise_max_number = @ordinal_number WHERE id=@module_id;

SELECT SCOPE_IDENTITY() as 'id', @ordinal_number as 'ordinal_number';]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_ins].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_ins].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_ins].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_ins].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_ins].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="642" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_answer_text_ins]&#xD;&#xA;&#x9;(@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@account_id int)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_answer_text_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
if (EXISTS(select id from [dbo].[exercise_answer_text] where parent_id = @exercise_text_id and is_approved = 0))
	begin
		update [dbo].[exercise_answer_text]
		set
			[name] = @name,
			[description] = @description,
			[module_id] = @module_id,
			[text] = @text,
			[ordinal_number] = @ordinal_number
		where parent_id = @exercise_text_id and is_approved = 0		
	end
else
	begin
		insert into [dbo].[exercise_answer_text]
			([name],
			[description],
			[module_id],
			[text],
			[ordinal_number],
			[is_approved],
			[parent_id])
		values (
			@name,
			@description,
			@module_id,
			@text,
			@ordinal_number,
			0,
			@exercise_text_id
		);
	end
select @result_id = @exercise_text_id;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@exercise_text_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_answer_text_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@exercise_text_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@ordinal_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_answer_text_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="968" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_answer_text_upd]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_text_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@ordinal_number int,&#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_answer_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT ISNULL(a.[parent_id], a.[id]) 'id'
		, a.[exercise_id]
		, a.[text]
		, a.[picture_id]
		, a.[is_right]
	FROM answer a
	WHERE 
		a.[exercise_id] = @exercise_id
		and
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 2, a.[exercise_id]) = 0
				and a.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 2, a.[exercise_id]) = 1
					and not exists (
							select innerAns.id
							from dbo.answer innerAns
							where innerAns.parent_id = a.id
						)
				)
			)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[is_right]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_answer_list].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_answer_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_answer_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_answer_list].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="630" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_answer_list]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 2, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.exercise_select
			set
				dbo.exercise_select.[description] = child.[description]
				,dbo.exercise_select.name = child.name
				--,dbo.exercise_select.ordinal_number = child.ordinal_number
				,dbo.exercise_select.[text] = child.[text]
				,dbo.exercise_select.picture_id = child.picture_id
			from dbo.exercise_select
			inner join dbo.exercise_select child
			on child.parent_id = dbo.exercise_select.id
			where 
				dbo.exercise_select.id = @exercise_id
				and dbo.exercise_select.parent_id is null
				and child.id is not null
			
			delete from dbo.exercise_select 
			where parent_id = @exercise_id
			
			update dbo.exercise_select
			set
				is_approved = 1
			where
				id = @exercise_id

			-- Сохранение ответов 

			declare answer_cursor cursor
			for 
			select id
			from dbo.answer
			where parent_id is null

			declare @answer_id int;

			open answer_cursor;

			fetch next from answer_cursor
			into @answer_id;

			while (@@FETCH_STATUS = 0)
			begin
				declare @anwer_approve_result int;
				exec dbo.pr_answer_approve @account_id, @answer_id, @anwer_approve_result output;

				fetch next from answer_cursor
				into @answer_id;
			end

			close answer_cursor;
			deallocate answer_cursor;

			commit
			select 0;
			return;
		end try
		begin catch
			rollback 
			select -2
			return;
		end catch
	end

	select -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_approve].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_answer_approve]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1637" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_del]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM answer
WHERE exercise_id = @exercise_select_id
DELETE FROM exercise_select
WHERE id = @exercise_select_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_del].[@exercise_select_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_del].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_del].[@exercise_select_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="221" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_del]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9; @exercise_select_id int)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT @exercise_id 'id'
		, e.[name]
		, e.[description]
		, e.[module_id]
		, e.[text]
		, e.[picture_id]
		, e.[ordinal_number]
		, e.[is_approved]
		, e.[parent_id]
	FROM exercise_select e
	WHERE
		(
			e.id = @exercise_id
			or e.parent_id = @exercise_id
		)
		and 
		(
			dbo.fn_is_show_unapproved_exercise(@account_id, 2, e.id) = 0
			and e.parent_id is null
			or
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 2, e.id) = 1
				and not exists (
						select innerEx.id
						from dbo.exercise_select innerEx
						where innerEx.parent_id = e.id
					)
			)
		)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="698" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_get]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @ordinal_number int;
DECLARE @id int;
SET @ordinal_number=(SELECT exercise_max_number FROM module WHERE id = @module_id) + 1;

INSERT INTO exercise_select
([name], [description], [module_id], [text], [picture_id], [ordinal_number], [parent_id], [is_approved])
VALUES (@name, @description, @module_id, @text, @picture_id, @ordinal_number, null, 0);

UPDATE module SET exercise_max_number = @ordinal_number WHERE id=@module_id;
SET @id = SCOPE_IDENTITY();

SELECT @id as 'id', @ordinal_number as 'ordinal_number';
END]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_ins].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_ins].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_ins].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_ins].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_ins].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="735" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_ins]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@picture_id int = null)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_text_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 4, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.exercise_select_text
			set
				dbo.exercise_select_text.[description] = child.[description]
				,dbo.exercise_select_text.name = child.name
				--,dbo.exercise_select_text.ordinal_number = child.ordinal_number
				,dbo.exercise_select_text.[text] = child.[text]
			from dbo.exercise_select_text
			inner join dbo.exercise_select_text child
			on child.parent_id = dbo.exercise_select_text.id
			where 
				dbo.exercise_select_text.id = @exercise_id
				and dbo.exercise_select_text.parent_id is null
				and child.id is not null
			
			delete from dbo.exercise_select_text 
			where parent_id = @exercise_id
			
			update dbo.exercise_select_text
			set
				is_approved = 1
			where
				id = @exercise_id

			commit
			select 0;
			return;
		end try
		begin catch
			rollback 
			select -2
			return;
		end catch
	end

	select -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_approve].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1104" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_text_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_text_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT @exercise_id 'id'
		, e.[name]
		, e.[description]
		, e.[module_id]
		, e.[text]
		, e.[ordinal_number]
		, e.[is_approved]
		, e.[parent_id]
	FROM exercise_select_text e
	WHERE 
		(
			e.id = @exercise_id
			or e.parent_id = @exercise_id
		)
		and
		(
			dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 0
			and e.parent_id is null
			or
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 1
				and not exists (
						select innerEx.id
						from dbo.exercise_select_text innerEx
						where innerEx.parent_id = e.id
					)
			)
		)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="693" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_text_get]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_text_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @ordinal_number int;
SET @ordinal_number=(SELECT exercise_max_number FROM module WHERE id = @module_id) + 1;
INSERT INTO exercise_select_text
([name], [description], [module_id], [text], [ordinal_number], [parent_id], [is_approved])
VALUES (@name, @description, @module_id, @text, @ordinal_number, null, 0);
UPDATE module SET exercise_max_number = @ordinal_number WHERE id=@module_id;
SELECT SCOPE_IDENTITY() as 'id', @ordinal_number as 'ordinal_number';
END]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_ins].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_ins].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_ins].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_ins].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_ins].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="652" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_text_ins]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_text_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
if (EXISTS(select id from [dbo].[exercise_select_text] where parent_id = @exercise_select_text_id and is_approved = 0))
begin
	update [dbo].[exercise_select_text]
	set
		[name] = @name,
		[description] = @description,
		[module_id] = @module_id,
		[text] = @text,
		[ordinal_number] = @ordinal_number
	where parent_id = @exercise_select_text_id and is_approved = 0	
end
else
begin
	insert into [dbo].[exercise_select_text]
		([name],
		[description],
		[module_id],
		[text],
		[ordinal_number],
		[is_approved],
		[parent_id])
	values (
		@name,
		@description,
		@module_id,
		@text,
		@ordinal_number,
		0,
		@exercise_select_text_id
	);
end
select @result_id = @exercise_select_text_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@exercise_select_text_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_text_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@exercise_select_text_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@ordinal_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_text_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="972" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_text_upd]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_select_text_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@ordinal_number int,&#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_select_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
if (EXISTS(select id from [dbo].[exercise_select] where parent_id = @exercise_select_id and is_approved = 0))
begin
	update [dbo].[exercise_select]
	set
		[name] = @name,
		[description] = @description,
		[module_id] = @module_id,
		[text] = @text,
		[ordinal_number] = @ordinal_number
	where parent_id = @exercise_select_id and is_approved = 0
end
else
begin
	insert into [dbo].[exercise_select]
		([name],
		[description],
		[module_id],
		[text],
		[picture_id],
		[ordinal_number],
		[is_approved],
		[parent_id])
	values (
		@name,
		@description,
		@module_id,
		@text,
		@picture_id,
		@ordinal_number,
		0,
		@exercise_select_id
	);
end
select @result_id = @exercise_select_id;
end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@exercise_select_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_select_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@exercise_select_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@ordinal_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_select_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="999" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_select_upd]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_select_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@picture_id int = null,&#xD;&#xA;&#x9;@ordinal_number int, &#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_skip_text_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 5, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.exercise_skip_text
			set
				dbo.exercise_skip_text.[description] = child.[description]
				,dbo.exercise_skip_text.name = child.name
				--,dbo.exercise_skip_text.ordinal_number = child.ordinal_number
				,dbo.exercise_skip_text.[text] = child.[text]
			from dbo.exercise_skip_text
			inner join dbo.exercise_skip_text child
			on child.parent_id = dbo.exercise_skip_text.id
			where 
				dbo.exercise_skip_text.id = @exercise_id
				and dbo.exercise_skip_text.parent_id is null
				and child.id is not null
			
			delete from dbo.exercise_skip_text 
			where parent_id = @exercise_id
			
			update dbo.exercise_skip_text
			set
				is_approved = 1
			where
				id = @exercise_id

			commit
			select 0;
			return;
		end try
		begin catch
			rollback 
			select -2
			return;
		end catch
	end

	select -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_approve].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1078" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_skip_text_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_skip_text_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	select @exercise_id 'id'
		, e.[name]
		, e.[description]
		, e.[module_id]
		, e.[text]
		, e.[ordinal_number]
		, e.[is_approved]
		, e.[parent_id]
	from exercise_skip_text e
	where 
		(
			e.id = @exercise_id
			or e.parent_id = @exercise_id
		)
		and
		(
			dbo.fn_is_show_unapproved_exercise(@account_id, 5, e.id) = 0
			and e.parent_id is null
			or
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 5, e.id) = 1
				and not exists (
						select innerEx.id
						from dbo.exercise_skip_text innerEx
						where innerEx.parent_id = e.id
					)
			)
		)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="687" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="create procedure [dbo].[pr_exercise_skip_text_get]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_skip_text_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @ordinal_number int;
SET @ordinal_number=(SELECT exercise_max_number FROM module WHERE id = @module_id) + 1;

INSERT INTO exercise_skip_text
([name], [description], [module_id], [text], [ordinal_number], [parent_id], [is_approved])
VALUES (@name, @description, @module_id, @text, @ordinal_number, null, 0);

UPDATE module SET exercise_max_number = @ordinal_number WHERE id=@module_id;

SELECT SCOPE_IDENTITY() as 'id', @ordinal_number as 'ordinal_number';
END]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_ins].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_ins].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_ins].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_ins].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_ins].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="654" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_skip_text_ins]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_skip_text_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
if (EXISTS(select id from [dbo].[exercise_skip_text] where parent_id = @exercise_skip_text_id and is_approved = 0))
begin
	update [dbo].[exercise_skip_text]
	set
		[name] = @name,
		[description] = @description,
		[module_id] = @module_id,
		[text] = @text,
		[ordinal_number] = @ordinal_number
	where parent_id = @exercise_skip_text_id and is_approved = 0	
end
else
begin
	insert into [dbo].[exercise_skip_text]
		([name],
		[description],
		[module_id],
		[text],
		[ordinal_number],
		[is_approved],
		[parent_id])
	values (
		@name,
		@description,
		@module_id,
		@text,
		@ordinal_number,
		0,
		@exercise_skip_text_id
	);
end
	select @result_id = @exercise_skip_text_id
	end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@exercise_skip_text_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_skip_text_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@exercise_skip_text_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@ordinal_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_skip_text_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="968" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_skip_text_upd]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_skip_text_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@ordinal_number int,&#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_answer_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT [id], [exercise_id], [account_id], [text], [mark]
	FROM exercise_text_answer
	WHERE [exercise_id] = @exercise_id and [account_id] = @account_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text_answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[mark]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_get].[@account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="249" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_answer_get]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_answer_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
INSERT INTO exercise_text_answer
([account_id], [exercise_id], [text], [mark])
VALUES (@account_id, @exercise_id, @text, null)

SELECT SCOPE_IDENTITY()]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text_answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[mark]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_ins].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_ins].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_ins].[@text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_ins].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="276" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_answer_ins]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_id int,&#xD;&#xA;&#x9;@text nvarchar(max))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_answer_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
if (EXISTS(select id from [dbo].[exercise_text_answer] where id = @id))
begin
	update [dbo].[exercise_text_answer]
	set
		[mark] = @mark,
		[text] = @text
	where id = @id	
	select @result_id = @id
end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text_answer]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_upd].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[mark]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_upd].[@mark]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text_answer].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_answer_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_upd].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_upd].[@mark]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_answer_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="339" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_answer_upd]&#xD;&#xA;&#x9;(&#xD;&#xA;&#x9;@id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@mark int,&#xD;&#xA;&#x9;@result_id int out)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_exercise_allowed_approve(@account_id, 1, @exercise_id) = 1)
	begin
		begin transaction;
		begin try
			
			update dbo.exercise_text
			set
				dbo.exercise_text.[description] = child.[description]
				,dbo.exercise_text.name = child.name
				--,dbo.exercise_text.ordinal_number = child.ordinal_number
				,dbo.exercise_text.[text] = child.[text]
			from dbo.exercise_text
			inner join dbo.exercise_text child
			on child.parent_id = dbo.exercise_text.id
			where 
				dbo.exercise_text.id = @exercise_id
				and dbo.exercise_text.parent_id is null
				and child.id is not null
			
			delete from dbo.exercise_text 
			where parent_id = @exercise_id
			
			update dbo.exercise_text
			set
				is_approved = 1
			where
				id = @exercise_id

			commit
			select 0;
			return;
		end try
		begin catch
			rollback 
			select -2
			return;
		end catch
	end

	select -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fn_is_exercise_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_approve].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_approve].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1013" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_approve]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@exercise_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_del]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
DELETE FROM exercise_text
WHERE id = @exercise_text_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_del].[@exercise_text_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_del].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_del].[@exercise_text_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="152" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_del]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9; @exercise_text_id int)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	select @exercise_id 'id'
		, e.[name]
		, e.[description]
		, e.[module_id]
		, e.[text]
		, e.[ordinal_number]
		, e.[is_approved]
		, e.[parent_id]
	from exercise_text e
	where 
		(
			e.id = @exercise_id
			or e.parent_id = @exercise_id
		)
		and 
		(
			dbo.fn_is_show_unapproved_exercise(@account_id, 1, e.id) = 0
			and e.parent_id is null
			or
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 1, e.id) = 1
				and not exists (
						select innerEx.id
						from dbo.exercise_text innerEx
						where innerEx.parent_id = e.id
					)
			)
		)]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_get].[@exercise_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_get].[@exercise_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="675" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="create procedure [dbo].[pr_exercise_text_get]&#xD;&#xA;(&#x9;@account_id int,&#xD;&#xA;&#x9;@exercise_id int)&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_ins]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
DECLARE @ordinal_number int;
DECLARE @id int;
SET @ordinal_number=(SELECT exercise_max_number FROM module WHERE id = @module_id) + 1;

UPDATE module SET exercise_max_number = @ordinal_number WHERE id=@module_id;

INSERT INTO exercise_text
([name], [description], [module_id], [text], [ordinal_number], [parent_id], [is_approved])
VALUES (@name, @description, @module_id, @text, @ordinal_number, null, 0)

SET @id = SCOPE_IDENTITY();

SELECT @id as 'id', @ordinal_number as 'ordinal_number';
END]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_ins].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_ins].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_ins].[@text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_ins].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_ins].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_ins].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_ins].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="679" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_ins]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max))&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	SELECT [id], [name], [description], [module_id], [text], [ordinal_number], [parent_id], [is_approved]
	FROM exercise_text
	WHERE [module_id] = @module_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_list].[@module_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_list].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="246" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_list]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@module_id int)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercise_text_upd]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
if (EXISTS(select id from [dbo].[exercise_text] where parent_id = @exercise_text_id and is_approved = 0))
begin
	update [dbo].[exercise_text]
	set
		[name] = @name,
		[description] = @description,
		[module_id] = @module_id,
		[text] = @text,
		[ordinal_number] = @ordinal_number
	where parent_id = @exercise_text_id and is_approved = 0
end
else
begin
	insert into [dbo].[exercise_text]
		([name],
		[description],
		[module_id],
		[text],
		[ordinal_number],
		[is_approved],
		[parent_id])
	values (
		@name,
		@description,
		@module_id,
		@text,
		@ordinal_number,
		0,
		@exercise_text_id
	);
end
	select @result_id = @exercise_text_id
	end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@exercise_text_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercise_text_upd].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@exercise_text_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@ordinal_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercise_text_upd].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="922" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercise_text_upd]&#xD;&#xA;&#x9;(@account_id int,&#xD;&#xA;&#x9;@exercise_text_id int,&#xD;&#xA;&#x9;@name nvarchar(200),&#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@text nvarchar(max),&#xD;&#xA;&#x9;@ordinal_number int,&#xD;&#xA;&#x9;@result_id int output)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercises_for_module_lst]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	select *
	from
	(
		select ISNULL(e.parent_id, e.id) 'id'
			,e.name 'name'
			,e.[description] 'description'
			,e.[ordinal_number] 'ordinal_number'
			,1 'Type'
		from dbo.exercise_text e
		where
			e.module_id = @module_id
			and 
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 1, e.id) = 0
				and e.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 1, e.id) = 1
					and not exists (
							select innerEx.id
							from dbo.exercise_text innerEx
							where innerEx.parent_id = e.id
						)
				)
			)

		union 

		select ISNULL(e.parent_id, e.id) 'id'
			,e.name 'name'
			,e.[description] 'description'
			,e.[ordinal_number] 'ordinal_number'
			,2 'Type'
		from dbo.exercise_select e
		where
			e.module_id = @module_id
			and 
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 2, e.id) = 0
				and e.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 2, e.id) = 1
					and not exists (
							select innerEx.id
							from dbo.exercise_select innerEx
							where innerEx.parent_id = e.id
						)
				)
			)

			union 

		select ISNULL(e.parent_id, e.id) 'id'
			,e.name 'name'
			,e.[description] 'description'
			,e.[ordinal_number] 'ordinal_number'
			,3 'Type'
		from dbo.exercise_answer_text e
		where 
			e.module_id = @module_id
			and
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 3, e.id) = 0
				and e.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 3, e.id) = 1
					and not exists (
							select innerEx.id
							from dbo.exercise_answer_text innerEx
							where innerEx.parent_id = e.id
						)
				)
			)

			union 

		select ISNULL(e.parent_id, e.id) 'id'
			,e.name 'name'
			,e.[description] 'description'
			,e.[ordinal_number] 'ordinal_number'
			,4 'Type'
		from dbo.exercise_select_text e
		where 
			e.module_id = @module_id
			and
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 0
				and e.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 4, e.id) = 1
					and not exists (
							select innerEx.id
							from dbo.exercise_select_text innerEx
							where innerEx.parent_id = e.id
						)
				)
			)

			union 

		select ISNULL(e.parent_id, e.id) 'id'
			,e.name 'name'
			,e.[description] 'description'
			,e.[ordinal_number] 'ordinal_number'
			,5 'Type'
		from dbo.exercise_skip_text e
		where 
			e.module_id = @module_id
			and
			(
				dbo.fn_is_show_unapproved_exercise(@account_id, 5, e.id) = 0
				and e.parent_id is null
				or
				(
					dbo.fn_is_show_unapproved_exercise(@account_id, 5, e.id) = 1
					and not exists (
							select innerEx.id
							from dbo.exercise_skip_text innerEx
							where innerEx.parent_id = e.id
						)
				)
			)
	) t1
	order by t1.ordinal_number]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_lst].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_lst].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_exercise]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercises_for_module_lst].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercises_for_module_lst].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3037" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercises_for_module_lst]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@module_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_exercises_for_module_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @orderingTableTemp table(ex_id int, ex_type int, order_index int);
		insert into @orderingTableTemp
		select 
			convert(int, 
				LEFT(
					LEFT(f.StringValue, charindex('=', f.StringValue) - 1), 
					charindex(',', 
						LEFT(f.StringValue, charindex('=', f.StringValue) - 1)
					) - 1 
				)
			),
			convert(int, 
				RIGHT(
					LEFT(f.StringValue, charindex('=', f.StringValue) - 1), 
					LEN(LEFT(f.StringValue, charindex('=', f.StringValue) - 1))
					 -  charindex(',', 
							LEFT(f.StringValue, charindex('=', f.StringValue) - 1)
						) 
				)
			),
			convert(int, 
				RIGHT(f.StringValue, LEN(f.StringValue) - charindex('=', f.StringValue))
				)
		from dbo.pr_split_string(@ordering_string, ';') f
	
		declare mycursor cursor
		for
		select ex_id, ex_type, order_index
		from @orderingTableTemp

		declare @ex_id int;
		declare @ex_type int
		declare @order_index int;

		open mycursor

		fetch next from mycursor
		into 
		@ex_id,
		@ex_type,
		@order_index

		while (@@FETCH_STATUS = 0)
		begin
			
			if (@ex_type = 1)
			begin
				update exercise_text
				set 
					ordinal_number = @order_index
				where id = @ex_id
			end
			if (@ex_type = 2)
			begin
				update exercise_select
				set 
					ordinal_number = @order_index
				where id = @ex_id
			end
			if (@ex_type = 3)
			begin
				update exercise_answer_text
				set 
					ordinal_number = @order_index
				where id = @ex_id
			end
			if (@ex_type = 4)
			begin
				update exercise_select_text
				set 
					ordinal_number = @order_index
				where id = @ex_id
			end
			if (@ex_type = 5)
			begin
				update exercise_skip_text
				set 
					ordinal_number = @order_index
				where id = @ex_id
			end

			fetch next from mycursor
			into 
			@ex_id,
			@ex_type,
			@order_index
		end
		select 0;
	end try
	begin catch
		select -1;
	end catch

	close mycursor
	deallocate mycursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_order].[@ordering_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[StringValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[ex_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[ex_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[order_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_answer_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_select_text].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[ordinal_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[exercise_skip_text].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[ex_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[ex_type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_exercises_for_module_order].[@orderingTableTemp].[order_index]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercises_for_module_order].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_exercises_for_module_order].[@ordering_string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2090" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_exercises_for_module_order]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@ordering_string varchar(max)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_category_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT film_category_id AS id, [name]
FROM [film_category_language]
WHERE language_id = @language_id
ORDER BY [name]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_category_get_list].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_category_get_list].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="203" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_category_get_list&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_clear_all]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DELETE FROM film_part
DELETE FROM film
DELETE FROM film_player
DELETE FROM film_category_language
DELETE FROM film_category]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film_part]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="175" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_clear_all&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_delete]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @owner int = null;
		select @owner = film.account_id from film
		where film.id = @film_id 

		if (@owner is not null)
		begin
			delete from film_order
			where film_order.account_id = @account_id
				and film_order.film_id = @film_id

			if (0 = (select count(*) from dbo.film_order where film_id = @film_id))
			begin
				begin try
					delete from film
					where id = @film_id
				end try
				begin catch
				end catch
			end
		end
		else
		begin
			update film_order 
			set 
				order_in_list = -1
			where
				account_id = @account_id
				and film_id = @film_id

			if (@@ROWCOUNT = 0)
				insert into film_order (account_id, film_id, order_in_list)
				values (@account_id, @film_id, -1);
		end
	end try
	begin catch
		select -1;
		return;
	end catch

	select 0;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_delete].[@film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_delete].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_delete].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_delete].[@film_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="910" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_film_delete]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@film_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT 
	f.id
	, f.name AS [name]
	, f.[description]
	, f.url AS url
	, p.pattern AS pattern
	, f.film_category_id
	, f.account_id
	, f.player_code
	,f.image_url
FROM  film f
LEFT JOIN film_player p
ON f.film_player_id = p.id
WHERE f.id = @id

SELECT url
FROM  film_part
WHERE film_id = @id
ORDER BY number]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[player_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[number]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="412" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_get&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;&#x9;@native_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

--SELECT t.id, t.url, t.image_url, tl.name, tl.[description], t.[is_editable], t.account_id, t.use_media_player
--	,ISNULL(ord.order_in_list, 0) 'order_in_list'
--FROM  film t
--INNER JOIN film_language tl
--ON tl.film_id = t.id AND tl.language_id = @native_language_id
--left join dbo.film_order ord
--on ord.film_id = t.id and ord.account_id = @account_id

SELECT t.id
	, t.url
	--, t.image_url
	, t.name
	, t.[description]
	, t.[is_editable]
	, t.account_id
	, t.film_category_id
	, fct.name 'category_name'
	, t.player_code
	, fp.pattern 'player_patter'
	, t.image_url
	, t.player_code
	,ISNULL(ord.order_in_list, 0) 'order_in_list'
FROM  film t
--INNER JOIN film_language tl
--ON tl.film_id = t.id AND tl.language_id = @native_language_id
left join dbo.film_order ord
on ord.film_id = t.id and ord.account_id = @account_id
left join dbo.film_category_language fct
on fct.film_category_id = t.film_category_id
	and fct.language_id = @native_language_id
left join dbo.film_player fp
on fp.id = t.film_player_id

WHERE
	(
		ord.order_in_list is null
		or ord.order_in_list >= 0
	)
	and
	(
		(
			t.language_id = @learn_language_id
			and t.account_id is null
		)
		or 
		(
			t.account_id = @account_id
			and ord.order_in_list >= 0
		)
		or 
		(
			t.language_id = @learn_language_id
			and t.account_id <> @account_id
			and ord.order_in_list >= 0
		)
	)
	and t.status = 1
ORDER BY t.id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[player_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1577" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_get_list&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;&#x9;@native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_get_list_by_category]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

--SELECT f.id, f.name AS [name], fcl.name AS category
--FROM  film f
--INNER JOIN film_category c
--ON f.film_category_id = c.id
--INNER JOIN film_category_language fcl
--ON fcl.film_category_id = c.id AND fcl.language_id = @native_language_id
--WHERE f.status = 1 AND (@category_id = 0 OR c.id = @category_id) AND f.language_id = @learn_language_id
--ORDER BY f.name


SELECT t.id
	, t.name
	, fct.name 'category'
	, t.image_url
	, t.account_id
FROM  film t
--INNER JOIN film_language tl
--ON tl.film_id = t.id AND tl.language_id = @native_language_id
left join dbo.film_order ord
on ord.film_id = t.id and ord.account_id = @account_id
left join dbo.film_category_language fct
on fct.film_category_id = t.film_category_id
	and fct.language_id = @native_language_id
left join dbo.film_player fp
on fp.id = t.film_player_id

WHERE
	(
		ord.order_in_list is null
		or ord.order_in_list >= 0
	)
	and
	(
		(
			t.language_id = @learn_language_id
			and t.account_id is null
		)
		or 
		(
			t.account_id = @account_id
			and ord.order_in_list >= 0
		)
		or 
		(
			t.language_id = @learn_language_id
			and t.account_id <> @account_id
			and ord.order_in_list >= 0
		)
	)
	and t.status = 1 AND (@category_id = 0 OR t.film_category_id = @category_id) AND t.language_id = @learn_language_id
ORDER BY isnull(ord.order_in_list, 0)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_category].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_category].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_category].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_category].[@category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_category].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_category].[@category_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_category].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_category].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1536" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE  PROCEDURE dbo.pr_film_get_list_by_category&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @category_id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_get_list_by_search]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

--IF (LEN(@search) <= 10)
--    BEGIN
--        SELECT f.id, f.name AS film, fcl.name AS category
--        FROM  film f
--        INNER JOIN film_category c
--        ON f.film_category_id = c.id
--        INNER JOIN film_category_language fcl
--        ON fcl.film_category_id = c.id AND fcl.language_id = @native_language_id
--        WHERE f.status = 1 AND f.name LIKE '%' + @search + '%' AND f.language_id = @learn_language_id
--        ORDER BY f.name
--    END

IF (LEN(@search) <= 10)
BEGIN
	SELECT t.id
		, t.name 'film'
		, fct.name 'category'
		, t.image_url
		, t.account_id
	FROM  film t
	--INNER JOIN film_language tl
	--ON tl.film_id = t.id AND tl.language_id = @native_language_id
	left join dbo.film_order ord
	on ord.film_id = t.id and ord.account_id = @account_id
	left join dbo.film_category_language fct
	on fct.film_category_id = t.film_category_id
		and fct.language_id = @native_language_id
	left join dbo.film_player fp
	on fp.id = t.film_player_id

	WHERE
		(
			ord.order_in_list is null
			or ord.order_in_list >= 0
		)
		and
		(
			(
				t.language_id = @learn_language_id
				and t.account_id is null
			)
			or 
			(
				t.account_id = @account_id
				and ord.order_in_list >= 0
			)
			or 
			(
				t.language_id = @learn_language_id
				and t.account_id <> @account_id
				and ord.order_in_list >= 0
			)
		)
		and t.status = 1 AND t.name LIKE '%' + @search + '%' AND t.language_id = @learn_language_id
	ORDER BY isnull(ord.order_in_list, 0)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_search].[@search]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_search].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_search].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_list_by_search].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_search].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_search].[@search]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_search].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_list_by_search].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1699" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE  PROCEDURE dbo.pr_film_get_list_by_search&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;&#x9;@search nvarchar(10),&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_get_other_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT t.id
	, t.url
	--, t.image_url
	, t.name
	, t.[description]
	, t.[is_editable]
	, t.account_id
	, t.film_category_id
	, fct.name 'category_name'
	, t.player_code
	, fp.pattern 'player_patter'
	, t.image_url
from film t
--INNER JOIN fm_language tl
--ON tl.fm_id = t.id AND tl.language_id = @native_language_id
left join dbo.film_category_language fct
on fct.film_category_id = t.film_category_id
	and fct.language_id = @native_language_id
left join dbo.film_player fp
on fp.id = t.film_player_id

WHERE t.is_editable = 0
	and 
	(
		t.language_id = @learn_language_id
		and t.account_id is not null
		and t.account_id <> @account_id
		and 
		(
			not exists (
						select top 1 film_id 
						from film_order 
						where 
							order_in_list >= 0 
							and film_order.account_id = @account_id
							and t.id = film_order.film_id
						)
		)
		or
		(
			t.account_id = @account_id
			and 
			(
				not exists (
							select top 1 film_id 
							from film_order 
							where 
								order_in_list >= 0 
								and film_order.account_id = @account_id
								and t.id = film_order.film_id
							)
			)
		)
		or
		(
			t.language_id = @learn_language_id
			and t.account_id is null
			and exists (
						select top 1 film_id 
						from film_order 
						where 
							order_in_list < 0 
							and film_order.account_id = @account_id
							and t.id = film_order.film_id
						)
		)
	)
	and t.status = 1
ORDER BY t.id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_other_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[player_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_other_list].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_get_other_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_other_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_other_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_get_other_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1637" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_film_get_other_list]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @category_id int
DECLARE @player_id int

SET @category_id = (SELECT film_category_id
                    FROM film_category_language
                    WHERE [name] = @category AND
                    language_id = @native_language_id)
IF (@category_id IS NULL)
    BEGIN
        INSERT INTO film_category DEFAULT VALUES
        SET @category_id = SCOPE_IDENTITY()
        INSERT INTO film_category_language
        (language_id, film_category_id, [name])
        VALUES (@native_language_id, @category_id, @category)
    END

SET @player_id = (SELECT id FROM film_player WHERE pattern = @player_pattern)
IF (@player_id IS NULL)
    BEGIN
        INSERT INTO film_player (pattern) VALUES (@player_pattern)
        SET @player_id = SCOPE_IDENTITY()
    END

INSERT INTO film
([id], [name], [url], [film_category_id], [film_player_id], language_id)
VALUES (@id, @name, @url, @category_id, @player_id, @learn_language_id)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_category_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@player_pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_player].[pattern]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_player_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_ins].[@learn_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@category]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@player_pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="2000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_ins].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1189" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_ins&#xD;&#xA;(&#xD;&#xA;    @name nvarchar(100),&#xD;&#xA;    @category nvarchar(30),&#xD;&#xA;    @player_pattern nvarchar(2000),&#xD;&#xA;    @url nvarchar(100),&#xD;&#xA;    @id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_part_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

INSERT INTO film_part
(film_id, number, url)
VALUES (@id, @number, @url)]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film_part]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_part].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_part_ins].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_part_ins].[@number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_part_ins].[@url]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_part_ins].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_part_ins].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_part_ins].[@number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="183" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_film_part_ins&#xD;&#xA;(&#xD;&#xA;    @url nvarchar(100),&#xD;&#xA;    @id int,&#xD;&#xA;    @number int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_upd_status]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[
UPDATE film SET status = @status WHERE id = @id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_upd_status].[@status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_upd_status].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_upd_status].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_upd_status].[@status]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="129" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE dbo.pr_film_upd_status&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @status bit&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_update_or_insert]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @isEditableField bit;
	declare @accountIdField int;
	declare @existingFilmId int;
	select @existingFilmId = id, @isEditableField = is_editable, @accountIdField = account_id
	from dbo.film
	where id = @id

	if @existingFilmId is not null
		and 
		(
			@accountIdField <> @account_id
			or ISNULL(@isEditableField, 0) = 0
		)
	begin
		-- Нельзя редактировать данную запись, т.к.
		-- она не помечена на редактирование 
		-- или не пренадлежит текущему пользователю
		select -1;
		return;
	end
	
	update dbo.film
	set
		--account_id = @account_id
		--,is_editable = @is_editable
		name = @name
		,image_url = @image_url
		,player_code = @player_code
		,language_id = @language_id
		,film_category_id = @category_id
		,[description] = @description
	where
		id = @id

	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.film
			(account_id, image_url, is_editable, language_id, player_code, film_category_id, name, [description], [status])
		values
			(@account_id, @image_url, 1, @language_id, @player_code, @category_id, @name, @description, 1)
		select @id = SCOPE_IDENTITY()

		insert into dbo.film_order
			(order_in_list, film_id, account_id)
		values
			--( (
			--	select case when MAX(order_in_list) > 0 then MAX(order_in_list) else 0 end
			--	from dbo.fm_order ord
			--	where ord.account_id = @account_id
			--  )
			--, @id)
			(0, @id, @account_id)
	end

	--update dbo.fm_language
	--set
	--	[description] = @description
	--	,name = @name
	--where 
	--	fm_id = @id
	--	and language_id = @native_language_id
	--if (@@ROWCOUNT = 0)
	--begin
	--	insert into dbo.fm_language
	--		(fm_id, language_id, [description], name)
	--	values
	--		(@id, @native_language_id, @description, @name)
	--end

	select @id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[player_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@player_code]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[film_category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@category_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_or_insert].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film].[status]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@player_code]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@image_url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@is_editable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_or_insert].[@category_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2069" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_film_update_or_insert]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @language_id int,&#xD;&#xA;&#x9;@native_language_id int,&#xD;&#xA;&#x9;@id int,&#xD;&#xA;&#x9;@player_code nvarchar(max),&#xD;&#xA;&#x9;@image_url nvarchar(max), &#xD;&#xA;&#x9;@name nvarchar(max), &#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@is_editable bit,&#xD;&#xA;&#x9;@category_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_film_update_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @orderingTableTemp table(film_id int, order_index int);
		insert into @orderingTableTemp
		select convert(int, LEFT(f.StringValue, charindex('=', f.StringValue) - 1))
			   , convert(int, RIGHT(f.StringValue, LEN(f.StringValue) - charindex('=', f.StringValue)))
		from dbo.pr_split_string(@ordering_string, ';') f
	
		declare mycursor cursor
		for
		select film_id, order_index
		from @orderingTableTemp

		declare @film_id int;
		declare @order_index int;

		open mycursor

		fetch next from mycursor
		into 
		@film_id,
		@order_index

		while (@@FETCH_STATUS = 0)
		begin
			update dbo.film_order
			set
				order_in_list = @order_index
			where
				account_id = @account_id
				and film_id = @film_id

			if (@@ROWCOUNT = 0)
				insert into film_order (account_id, film_id, order_in_list)
				values (@account_id, @film_id, @order_index)

			fetch next from mycursor
			into 
			@film_id,
			@order_index
		end
		select 0;
	end try
	begin catch
		select -1;
	end catch

	close mycursor
	deallocate mycursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_order].[@ordering_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[StringValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_order].[@orderingTableTemp].[film_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_order].[@orderingTableTemp].[order_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_film_update_order].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[film_order].[film_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_film_update_order].[@orderingTableTemp]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_film_update_order].[@orderingTableTemp].[film_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_film_update_order].[@orderingTableTemp].[order_index]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_order].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_film_update_order].[@ordering_string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1180" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_film_update_order]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@ordering_string varchar(max)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_delete]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @owner int = null;
		select @owner = fm.account_id from fm
		where fm.id = @fm_id 

		if (@owner is not null)
		begin
			delete from fm_order
			where fm_order.account_id = @account_id
				and fm_order.fm_id = @fm_id

			if (0 = (select count(*) from dbo.fm_order where fm_id = @fm_id))
			begin
				begin try
					delete from fm
					where id = @fm_id
				end try
				begin catch
				end catch
			end
		end
		else
		begin
			update fm_order 
			set 
				order_in_list = -1
			where
				account_id = @account_id
				and fm_id = @fm_id

			if (@@ROWCOUNT = 0)
				insert into fm_order (account_id, fm_id, order_in_list)
				values (@account_id, @fm_id, -1);
		end
	end try
	begin catch
		select -1;
		return;
	end catch

	select 0;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_delete].[@fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_delete].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_delete].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_delete].[@fm_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="866" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_fm_delete]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@fm_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT f.account_id, f.image_url, f.is_editable, f.language_id, f.url, f.use_media_player, fl.[description], fl.name
FROM  fm f
INNER JOIN fm_language fl
ON fl.fm_id = f.id AND fl.language_id = @native_language_id
WHERE f.id = @id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[use_media_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="323" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_fm_get&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @native_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT t.id, t.url, t.image_url, tl.name, tl.[description], t.[is_editable], t.account_id, t.use_media_player
	,ISNULL(ord.order_in_list, 0) 'order_in_list'
FROM  fm t
INNER JOIN fm_language tl
ON tl.fm_id = t.id AND tl.language_id = @native_language_id
left join dbo.fm_order ord
on ord.fm_id = t.id and ord.account_id = @account_id
WHERE
	(
		ord.order_in_list is null
		or ord.order_in_list >= 0
	)
	and
	(
		(
			t.language_id = @learn_language_id
			and t.account_id is null
		)
		or 
		(
			t.account_id = @account_id
			and ord.order_in_list >= 0
		)
		or 
		(
			t.language_id = @learn_language_id
			and t.account_id <> @account_id
			and ord.order_in_list >= 0
		)
	)
ORDER BY t.id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[use_media_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_list].[@learn_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="849" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_fm_get_list&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;&#x9;@native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_get_other_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT t.id, t.url, t.account_id, t.image_url, tl.name, tl.description, t.[is_editable], t.use_media_player
FROM  fm t
INNER JOIN fm_language tl
ON tl.fm_id = t.id AND tl.language_id = @native_language_id
WHERE t.is_editable = 0
	and 
	(
		t.language_id = @learn_language_id
		and t.account_id is not null
		and t.account_id <> @account_id
		and 
		(
			not exists (
						select top 1 fm_id 
						from fm_order 
						where 
							order_in_list >= 0 
							and fm_order.account_id = @account_id
							and t.id = fm_order.fm_id
						)
		)
		or
		(
			t.account_id = @account_id
			and 
			(
				not exists (
							select top 1 fm_id 
							from fm_order 
							where 
								order_in_list >= 0 
								and fm_order.account_id = @account_id
								and t.id = fm_order.fm_id
							)
			)
		)
		or
		(
			t.language_id = @learn_language_id
			and t.account_id is null
			and exists (
						select top 1 fm_id 
						from fm_order 
						where 
							order_in_list < 0 
							and fm_order.account_id = @account_id
							and t.id = fm_order.fm_id
						)
		)
	)
ORDER BY t.id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_other_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[use_media_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_other_list].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_get_other_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_other_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_other_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_get_other_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1271" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_fm_get_other_list]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_update_or_insert]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @isEditableField bit;
	declare @accountIdField int;
	declare @existingFmId int;
	select @existingFmId = id, @isEditableField = is_editable, @accountIdField = account_id
	from dbo.fm
	where id = @id

	if @existingfmId is not null
		and 
		(
			@accountIdField <> @account_id
			or ISNULL(@isEditableField, 0) = 0
		)
	begin
		-- Нельзя редактировать данную запись, т.к.
		-- она не помечена на редактирование 
		-- или не пренадлежит текущему пользователю
		select -1;
		return;
	end
	
	update dbo.fm
	set
		--account_id = @account_id
		--,is_editable = @is_editable
		image_url = @image_url
		,url = @url
		,language_id = @language_id
		,use_media_player = @use_media_player
	where
		id = @id

	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.fm
			(account_id, image_url, is_editable, language_id, url, use_media_player)
		values
			(@account_id, @image_url, 1, @language_id, @url, @use_media_player)
		select @id = SCOPE_IDENTITY()

		insert into dbo.fm_order
			(order_in_list, fm_id, account_id)
		values
			--( (
			--	select case when MAX(order_in_list) > 0 then MAX(order_in_list) else 0 end
			--	from dbo.fm_order ord
			--	where ord.account_id = @account_id
			--  )
			--, @id)
			(0, @id, @account_id)
	end

	update dbo.fm_language
	set
		[description] = @description
		,name = @name
	where 
		fm_id = @id
		and language_id = @native_language_id
	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.fm_language
			(fm_id, language_id, [description], name)
		values
			(@id, @native_language_id, @description, @name)
	end

	select @id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm].[use_media_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@use_media_player]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_or_insert].[@native_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@image_url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@is_editable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_or_insert].[@use_media_player]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1893" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_fm_update_or_insert]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @language_id int,&#xD;&#xA;&#x9;@native_language_id int,&#xD;&#xA;&#x9;@id int,&#xD;&#xA;&#x9;@url nvarchar(max),&#xD;&#xA;&#x9;@image_url nvarchar(max), &#xD;&#xA;&#x9;@name nvarchar(max), &#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@is_editable bit,&#xD;&#xA;&#x9;@use_media_player bit&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_fm_update_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @orderingTableTemp table(fm_id int, order_index int);
		insert into @orderingTableTemp
		select convert(int, LEFT(f.StringValue, charindex('=', f.StringValue) - 1))
			   , convert(int, RIGHT(f.StringValue, LEN(f.StringValue) - charindex('=', f.StringValue)))
		from dbo.pr_split_string(@ordering_string, ';') f
	
		declare mycursor cursor
		for
		select fm_id, order_index
		from @orderingTableTemp

		declare @fm_id int;
		declare @order_index int;

		open mycursor

		fetch next from mycursor
		into 
		@fm_id,
		@order_index

		while (@@FETCH_STATUS = 0)
		begin
			update dbo.fm_order
			set
				order_in_list = @order_index
			where
				account_id = @account_id
				and fm_id = @fm_id

			if (@@ROWCOUNT = 0)
				insert into fm_order (account_id, fm_id, order_in_list)
				values (@account_id, @fm_id, @order_index)

			fetch next from mycursor
			into 
			@fm_id,
			@order_index
		end
		select 0;
	end try
	begin catch
		select -1;
	end catch

	close mycursor
	deallocate mycursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_order].[@ordering_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[StringValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_order].[@orderingTableTemp].[fm_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_order].[@orderingTableTemp].[order_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_fm_update_order].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fm_order].[fm_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_fm_update_order].[@orderingTableTemp]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_fm_update_order].[@orderingTableTemp].[fm_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_fm_update_order].[@orderingTableTemp].[order_index]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_order].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_fm_update_order].[@ordering_string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1156" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_fm_update_order]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@ordering_string varchar(max)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_language_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT id, [name]
FROM [language]
ORDER BY [name]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[language].[name]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="98" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_language_get_list&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_level_get_random]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

SELECT TOP 1 sentence, answer1, answer2, answer3, correct
FROM level
WHERE language_id = @language_id
ORDER BY NEWID()]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[level]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[sentence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[answer1]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[answer2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[answer3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[correct]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_get_random].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_get_random].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="193" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE pr_level_get_random&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_level_quiz_get_place]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

IF ((SELECT COUNT(*)  FROM level_quiz) >= 100) DELETE FROM level_quiz

INSERT INTO level_quiz(account_id, nick, result, language_id)
VALUES(@account_id, @nick, @success_count, @language_id)

DECLARE @id int
SET @id = (SELECT SCOPE_IDENTITY())

DECLARE @places TABLE
(
    place int IDENTITY (1, 1) NOT NULL,
    id int,
    account_id int,
    nick nvarchar(20),
    result int,
    language_id int
)

INSERT INTO @places (id, account_id, nick, result, language_id)
SELECT id, account_id, nick, result, language_id
FROM level_quiz
WHERE language_id = @language_id
ORDER BY result DESC, id DESC

SELECT TOP 1 place
FROM @places
WHERE id = @id

DELETE lq
FROM level_quiz lq
INNER JOIN @places p
ON lq.id = p.id
WHERE p.place > 100 AND lq.language_id = @language_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@success_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_level_quiz_get_place].[@places]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[place]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[account_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[nick]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[result]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_level_quiz_get_place].[@places].[language_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_quiz_get_place].[@account_id]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_quiz_get_place].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_quiz_get_place].[@success_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_quiz_get_place].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="949" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE pr_level_quiz_get_place&#xD;&#xA;(&#xD;&#xA;    @account_id int = null,&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @success_count int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_level_quiz_get_top]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="False" AnsiNulls="False"><![CDATA[

SELECT TOP 100
ISNULL(a.nick, q.nick) as nick,
q.result as result
FROM level_quiz q
LEFT JOIN account a
ON a.[id] = q.account_id
WHERE q.language_id = @language_id
ORDER BY result DESC, q.id DESC]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[level_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_level_quiz_get_top].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[level_quiz].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_level_quiz_get_top].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="276" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE pr_level_quiz_get_top&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_module_approve]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (dbo.fn_is_module_allowed_approve(@account_id, @module_id) = 1)
	begin
		begin transaction
		begin try
			update dbo.module
			set
				dbo.module.currency_id = child.currency_id,
				dbo.module.[description] = child.[description],
				dbo.module.[detailed_description] = child.[detailed_description],
				dbo.module.exercise_max_number = child.exercise_max_number,
				dbo.module.links = child.links,
				dbo.module.name = child.name,
				dbo.module.order_in_course = child.order_in_course,
				dbo.module.picture_id = child.picture_id,
				dbo.module.price = child.price,
				dbo.module.tags = child.tags,
				dbo.module.url = child.url,
				dbo.module.is_deleted = child.is_deleted
			from dbo.module
			inner join dbo.module child
			on dbo.module.id = child.parent_id

			delete from dbo.module
			where parent_id = @module_id;

			update dbo.module
			set
				is_approved = 1
			where
				id = @module_id

			declare @exercisesTable table(id int, name nvarchar(max), [description] nvarchar(max), [ordinal_number] int, [Type] int)

			insert into @exercisesTable
			exec dbo.pr_exercises_for_module_lst 
				@account_id = @account_id
				,@module_id = @module_id
			
			declare @ex_approve_result_table table(ret_val int);

			declare ex_cursor cursor
			for
			select [id], [type] 
			from @exercisesTable

			declare @ex_id int;
			declare @ex_type int;

			open ex_cursor;

			fetch next from ex_cursor
			into
			@ex_id, 
			@ex_type

			while (@@FETCH_STATUS = 0)
			begin
				declare @ex_approve_result int;
				set @ex_approve_result = 0;

				if (@ex_type = 1)
				begin
					insert into @ex_approve_result_table
					exec pr_exercise_text_approve @account_id = @account_id, @exercise_id = @ex_id
				end

				if (@ex_type = 2)
				begin
					insert into @ex_approve_result_table
					exec pr_exercise_select_approve @account_id = @account_id, @exercise_id = @ex_id
				end

				if (@ex_type = 3)
				begin
					insert into @ex_approve_result_table
					exec pr_exercise_answer_text_approve @account_id = @account_id, @exercise_id = @ex_id
				end

				if (@ex_type = 4)
				begin
					insert into @ex_approve_result_table
					exec pr_exercise_select_text_approve @account_id = @account_id, @exercise_id = @ex_id
				end

				if (@ex_type = 5)
				begin
					insert into @ex_approve_result_table
					exec pr_exercise_skip_text_approve @account_id = @account_id, @exercise_id = @ex_id
				end

				select @ex_approve_result = ret_val
				from @ex_approve_result_table

				if (@ex_approve_result < 0)
				begin
					raiserror('Cannot approve exercise!', 16, 1);
				end

				delete from @ex_approve_result_table;

				fetch next from ex_cursor
				into
				@ex_id,
				@ex_type
			end

			commit
			select @result_id = 0;
			return;
		end try
		begin catch
			rollback
			select @result_id = -2;
			select ERROR_MESSAGE();
			return;
		end catch

	end

	select @result_id = -1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_module_allowed_approve]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@exercisesTable].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@exercisesTable].[Type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@ex_approve_result_table].[ret_val]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_approve].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_module_approve].[@exercisesTable]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@exercisesTable].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@exercisesTable].[name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@exercisesTable].[description]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="IsMax" Value="True" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@exercisesTable].[ordinal_number]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@exercisesTable].[Type]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_module_approve].[@ex_approve_result_table]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_module_approve].[@ex_approve_result_table].[ret_val]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_approve].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_approve].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_approve].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="32" />
				<Property Name="Length" Value="3161" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Аппрув изменения для модуля&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_module_approve]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@result_id int = null output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_module_delete]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	DECLARE @RC int
	DECLARE @course_id int
	DECLARE @name nvarchar(100)
	DECLARE @description nvarchar(300)
	DECLARE @detailed_description nvarchar(max)
	DECLARE @picture_id int
	DECLARE @currency_id int
	DECLARE @price decimal(18,2)
	DECLARE @url varchar(100)
	DECLARE @tags nvarchar(1000)
	DECLARE @links nvarchar (4000)
	DECLARE @exercise_max_number int
	DECLARE @order_in_course int

	select
		@course_id = m.course_id
		,@name = m.name
		,@description = m.[description]
		,@detailed_description = m.detailed_description
		,@picture_id = m.picture_id
		,@currency_id = m.currency_id
		,@price = m.price
		,@url = m.url
		,@tags = m.tags
		,@links = m.links
		,@exercise_max_number = m.exercise_max_number
		,@order_in_course = m.order_in_course
	from dbo.module m
	where 
	(
		m.id = @module_id
		or m.parent_id = @module_id
	)
	and
	(
		not exists (
				select innerModule.id 
				from dbo.module innerModule
				where m.id = innerModule.parent_id
			)
	)

	-- сперва надо проапдейтить запись

	execute @RC = [dbo].[pr_module_update]
	   @account_id
	  ,@module_id
	  ,@course_id
	  ,@name
	  ,@description
	  ,@detailed_description
	  ,@picture_id
	  ,@currency_id
	  ,@price
	  ,@url
	  ,@tags
	  ,@links
	  ,@exercise_max_number
	  ,@order_in_course

	update dbo.module
	set
		is_deleted = 1
	where
		parent_id = @module_id
		and is_approved = 0]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_delete].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_delete].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_delete].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_delete].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1499" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_module_delete]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@module_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_module_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

declare @is_show_unapproved bit;
select @is_show_unapproved = dbo.fn_is_show_unapproved_module(@account_id, @module_id);

select @module_id 'id'
      ,m.[number]
      ,m.[course_id]
      ,m.[name]
      ,m.[description]
      ,m.[detailed_description]
      ,m.[picture_id]
	  ,m.[currency_id]
      ,m.[price]
      ,m.[url]
      ,m.[tags]
      ,m.[links]
      ,m.[order_in_course]
	  ,m.[exercise_max_number]
	  ,convert(bit, ( select top 1 
			case when pt.id is not null or m.price = 0 then 1 
				else 0 
			end 
		 from dbo.payment pt 
		 where pt.module_id = ISNULL(m.parent_id, m.id) and pt.account_id = @account_id)) as 'is_payd'
	  ,cur.name 'currency_name'
	  ,convert(float, (
					select top 1 (rs.value)
					from dbo.rating rs 
					where account_id is null
						and m.number = rs.target_element)
						) 'rate_by_current_user'
	 ,cr.owner_id 'owner_id'
from [dbo].[module] m
left join dbo.currency cur
on cur.id = m.currency_id
left join dbo.course cr
on cr.id = m.course_id
where 
	(
		m.[id] = @module_id
		or m.[parent_id] = @module_id
	)
	and 
	(
		@is_show_unapproved = 0
		and m.is_approved = 1
		and m.parent_id is null
		or
		(
			@is_show_unapproved = 1
			and not exists (
					select innerModule.id 
					from dbo.module innerModule
					where m.id = innerModule.parent_id
				)
		)
	)
	and isnull(m.is_deleted, 0) = 0]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_get].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_get].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_get].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_get].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="73" />
				<Property Name="Length" Value="1569" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Description: хранимая процедура, которая &#xD;&#xA;-- выводит модуль по id&#xD;&#xA;&#xD;&#xA;create procedure [dbo].[pr_module_get]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int&#xD;&#xA;&#x9;,@module_id int&#xD;&#xA;)&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_module_update]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	update dbo.module
	set course_id = @course_id,
		name = @name,
		[description] = @description,
		[detailed_description] = @detailed_description,
		picture_id = case when @picture_id = -1 then null
							when @picture_id is not null then @picture_id
						else picture_id end,
		currency_id = @currency_id,
		price = @price,
		url = @url,
		tags = @tags,
		links = @links,
		exercise_max_number = @exercise_max_number,
		order_in_course = @order_in_course
	where 
		parent_id = @module_id
		and is_approved = 0

	if (@@ROWCOUNT = 0)
	begin
		declare @parent_id int;
		select @parent_id = case
								when @module_id > 0 then @module_id
								when @module_id = 0 then null
								else -1
							end;
		declare @parent_picture_id int;
		set @parent_picture_id = null;
		declare @parent_number uniqueidentifier;
		set @parent_number = NEWID();

		select 
			@parent_picture_id = picture_id
			,@parent_number = number
		from dbo.module
		where id = @module_id

		insert into dbo.module
			(course_id, 
			currency_id,
			[description],
			detailed_description,
			links,
			name,
			number,
			order_in_course,
			picture_id,
			price,
			tags,
			url,
			exercise_max_number,
			is_approved,
			parent_id)
		values (@course_id,
			@currency_id,
			@description,
			@detailed_description,
			@links,
			@name,
			NEWID(),
			@order_in_course,
			case when @picture_id > 0 then @picture_id
						else null end,
			@price,
			@tags,
			@url,
			@exercise_max_number,
			0,
			@parent_id)

		if ( @parent_id is null)
		begin
			select @module_id = SCOPE_IDENTITY();
		end
	end
	
	select @module_id;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_module_update].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@detailed_description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@picture_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@price]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@tags]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@links]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@exercise_max_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_module_update].[@order_in_course]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2052" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_module_update]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@course_id int,&#xD;&#xA;&#x9;@name varchar(max),&#xD;&#xA;&#x9;@description varchar(max),&#xD;&#xA;&#x9;@detailed_description varchar(max),&#xD;&#xA;&#x9;@picture_id int = null,&#xD;&#xA;&#x9;@currency_id int,&#xD;&#xA;&#x9;@price decimal(18,2),&#xD;&#xA;&#x9;@url varchar(max),&#xD;&#xA;&#x9;@tags varchar(max),&#xD;&#xA;&#x9;@links varchar(max),&#xD;&#xA;&#x9;@exercise_max_number int,&#xD;&#xA;&#x9;@order_in_course int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_modules_for_course_lst]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

select ISNULL(m.parent_id, m.id) 'id'
      ,m.[number]
      ,m.[course_id]
      ,m.[name]
      ,m.[description]
      ,m.[detailed_description]
      ,m.[picture_id]
	  ,m.[currency_id]
      ,m.[price]
      ,m.[url]
      ,m.[tags]
      ,m.[links]
	  ,m.[is_approved]
      ,m.[order_in_course]
	  ,convert(bit, ( select top 1 
			case when pt.id is not null or m.price = 0 then 1 
				else 0 
			end 
		 from dbo.payment pt 
		 where pt.module_id = ISNULL(m.parent_id, m.id) and pt.account_id = @account_id)) as 'is_payd'
	 ,m.[exercise_max_number]
	 ,cur.name 'currency_name'
	 ,cr.owner_id 'owner_id'
	 ,m.price * ISNULL(dbo.fn_get_currency_rate(m.currency_id, cr.currency_id, GETUTCDATE()), 1.0) 'price_in_course_currency'
	 ,convert(float, (
					select top 1 (rs.value)
					from dbo.rating rs 
					where account_id is null
						and m.number = rs.target_element)
						) 'total_rate'
from [dbo].[module] m
left join dbo.currency cur
on cur.id = m.currency_id
left join dbo.course cr
on cr.id = m.course_id
where [course_id] = @course_id
	and 
	(
		dbo.fn_is_show_unapproved_module(@account_id, m.id) = 0
		and m.is_approved = 1
		and m.parent_id is null
		or
		(
			dbo.fn_is_show_unapproved_module(@account_id, m.id) = 1
			and not exists (
					select innerModule.id 
					from dbo.module innerModule
					where m.id = innerModule.parent_id
				)
		)
	)
	and isnull(m.is_deleted, 0) = 0
order by  m.[order_in_course]]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[detailed_description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[picture_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[tags]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[links]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_approved]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_modules_for_course_lst].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[exercise_max_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[currency].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[owner_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_modules_for_course_lst].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_is_show_unapproved_module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[is_deleted]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_modules_for_course_lst].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_modules_for_course_lst].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="114" />
				<Property Name="Length" Value="1699" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.20&#xD;&#xA;-- Description: хранимая процедура, которая &#xD;&#xA;--  выводит список модулей для курса&#xD;&#xA;&#xD;&#xA;create procedure [dbo].[pr_modules_for_course_lst]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int&#xD;&#xA;&#x9;,@course_id int&#xD;&#xA;)&#xD;&#xA;as" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_modules_for_course_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @orderingTableTemp table(module_id int, order_index int);
		insert into @orderingTableTemp
		select convert(int, LEFT(f.StringValue, charindex('=', f.StringValue) - 1))
			   , convert(int, RIGHT(f.StringValue, LEN(f.StringValue) - charindex('=', f.StringValue)))
		from dbo.pr_split_string(@ordering_string, ';') f
	
		declare mycursor cursor
		for
		select module_id, order_index
		from @orderingTableTemp

		declare @module_id int;
		declare @order_index int;

		open mycursor

		fetch next from mycursor
		into 
		@module_id,
		@order_index

		while (@@FETCH_STATUS = 0)
		begin
			update dbo.module
			set
				order_in_course = @order_index
			where
				id = @module_id

			fetch next from mycursor
			into 
			@module_id,
			@order_index
		end
		select 0;
	end try
	begin catch
		select -1;
	end catch

	close mycursor
	deallocate mycursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_modules_for_course_order].[@ordering_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[StringValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_modules_for_course_order].[@orderingTableTemp].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_modules_for_course_order].[@orderingTableTemp].[order_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[order_in_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_modules_for_course_order].[@orderingTableTemp]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_modules_for_course_order].[@orderingTableTemp].[module_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_modules_for_course_order].[@orderingTableTemp].[order_index]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_modules_for_course_order].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_modules_for_course_order].[@ordering_string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1017" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_modules_for_course_order]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@ordering_string varchar(max)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_payment_for_course_add]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @tranName varchar(max)
	set @tranName = 'myTransactionCourse';
	
	begin try
	begin transaction @tranName
		
		declare @moduleForPayment table(id int, price decimal(18,2), currency_id int)

		insert into @moduleForPayment
		select m.id, m.price, m.currency_id 
		from dbo.module m
		where m.course_id = @course_id
			and m.parent_id is null
			and not exists (select pt.id 
							from dbo.payment pt
							where pt.module_id = m.id and pt.account_id = @account_id)
			

		declare @courseCurrency int;
		declare @courseDefaultPrice decimal(18, 2);
		select @courseCurrency = currency_id,
			@courseDefaultPrice = price
		from dbo.course
		where id = @course_id

		if (exists(select id from @moduleForPayment))
		begin
			
			-- рассчитываем коэффициент скидки
			declare @sum_for_all_modules decimal(18,2)

			-- сумма по всем модулям в валюте курса
			select @sum_for_all_modules = 
				SUM(case
						when m.currency_id = @courseCurrency then m.price
						else m.price * ISNULL(dbo.fn_get_currency_rate(m.currency_id, @courseCurrency, @payment_date), 1.0)
					end)
			from dbo.module m
			where m.course_id = @course_id
				and m.parent_id is null
						
			declare @discount_rate decimal (18, 8);
			select @discount_rate = @courseDefaultPrice / @sum_for_all_modules;

			-- оплачиваем все модули

			declare @cursor_id int;
			declare @cursor_price decimal(18,2);
			declare @cursor_currency_id int;
			declare @result_for_module int;

			declare module_corsor cursor for
			select * 
			from @moduleForPayment

			open module_corsor
			
			fetch next from module_corsor into
			@cursor_id, 
			@cursor_price, 
			@cursor_currency_id
			
			while @@FETCH_STATUS = 0
			begin
				-- вычисляем стоимость курса с расчетом на скидку
				select @result_for_module = 0;
			
				exec [dbo].[pr_payment_for_module_add] 
					@account_id = @account_id, 
					@module_id = @cursor_id,
					@payment_date = @payment_date,
					@currency_id = @cursor_currency_id,
					@payment_value = @cursor_price,
					@discount_rate = @discount_rate,
					@result_id = @result_for_module output;

				if (@result_for_module < 0)
				begin
					raiserror('Cannot pay for module or already paid!', 16, 1);
				end

				fetch next from module_corsor into
				@cursor_id, 
				@cursor_price, 
				@cursor_currency_id
			end

			close module_corsor
			deallocate module_corsor

			select @result_id = @result_for_module
		end
		else
		begin
			select @result_id = -1 -- Оплата по курсу уже внесена
		end

		commit transaction @tranName
		select @result_id
	end try
	begin catch
		rollback transaction @tranName
		select @result_id = -2
		print ERROR_MESSAGE()
	end catch]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_course_add].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[parent_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_course_add].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_course_add].[@moduleForPayment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_course_add].[@payment_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payment_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payment_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@discount_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@result_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_course_add].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_payment_for_course_add].[@moduleForPayment]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_course_add].[@moduleForPayment].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_course_add].[@moduleForPayment].[price]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Scale" Value="2" />
												<Property Name="Precision" Value="18" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_course_add].[@moduleForPayment].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@payment_date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@payment_value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_course_add].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="76" />
				<Property Name="Length" Value="3033" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Description: Внесение оплаты за весь курс&#xD;&#xA;-- Change Date: 01.06.2013&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_payment_for_course_add]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@course_id int,&#xD;&#xA;&#x9;@payment_date datetime,&#xD;&#xA;&#x9;@currency_id int,&#xD;&#xA;&#x9;@payment_value decimal(18, 2),&#xD;&#xA;&#x9;@result_id int output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_payment_for_module_add]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @tranName varchar(max)
	set @tranName = 'myTranactionModule'

	begin transaction @tranName;
	begin try	
		
		if (not exists(select pt.id
					from dbo.payment pt
					where pt.module_id = @module_id and pt.account_id = @account_id))
		begin
			declare @price decimal(18, 2);
			declare @module_currency_id int;
			
			select @price = m.price,
				@module_currency_id = m.currency_id
			from dbo.module m
			where m.id = @module_id

			if (@discount_rate <> 1.0)
			begin
				select @price = @price * @discount_rate;
			end

			declare @payments table (currency_id int, value decimal(18, 2));
			declare @balance table (currency_id int, value decimal(18, 2));

			insert into @balance
			select acb.currency_id, acb.value
			from dbo.account_money_balance acb
			where acb.account_id = @account_id
			
			declare @currentValue decimal(18, 2);
			declare @currentCurrency_id int;

			-- Сперва берем из той валюты, которая проставлена в модуле
			select @currentCurrency_id = currency_id,
				@currentValue = value
			from @balance
			where currency_id = @module_currency_id
			
			delete from @balance
			where currency_id = @module_currency_id

			-- Если нет валюты, требуемой для модуля, то просто берем любую
			if (@currentCurrency_id is null)
			begin
				select top 1 @currentCurrency_id = currency_id,
					@currentValue = value
				from @balance
			
				delete from @balance
				where currency_id = @currentCurrency_id
			end

			while (@currentCurrency_id is not null and @price > 0)
			begin
				if (@currentCurrency_id is not null 
					and @currentValue is not null 
					and @currentValue > 0)
				begin
					-- Получаем множитель для преобразования валют
					declare @currencyRateMultiplier decimal(18, 8);
					select @currencyRateMultiplier = dbo.fn_get_currency_rate(@module_currency_id, @currentCurrency_id, @payment_date);

					if (@currencyRateMultiplier is null)
					begin
						raiserror('There is not currency rate!', 16, 1);
					end

					-- тут есть множитель для преобразования
					-- вычисляем количество денег
					declare @neededSum decimal(18, 2);
					set @neededSum = @price * @currencyRateMultiplier;
					if (@currentValue >= @neededSum)
					begin
						set @price = 0;
						insert into @payments (currency_id, value)
							values(@currentCurrency_id, @neededSum)
					end
					else
					begin
						set @price = @price - (@currentValue / @currencyRateMultiplier);
						insert into @payments (currency_id, value)
							values(@currentCurrency_id, @currentValue / @currencyRateMultiplier);
					end
				end
				
				set @currentCurrency_id = null;
				-- выбираем запас для следующей валюты
				select top 1 @currentCurrency_id = currency_id,
					@currentValue = value
				from @balance
			
				delete from @balance
				where currency_id = @currentCurrency_id
			end

			if (@price <> 0)
			begin
				raiserror('Not enought of money!', 16, 1);
			end
			
			insert into dbo.payment
				(account_id, module_id, currency_id, payment_date, payment_value)
			values
				(@account_id, @module_id, @currency_id, @payment_date, @payment_value)
			
			select @result_id = SCOPE_IDENTITY()  -- Курс успешно оплачен

			insert into dbo.account_money_hystory
				(account_id, change_date, currency_id, income_value)
			select @account_id, @payment_date, p.currency_id, -p.value
			from @payments p
		end
		else
		begin
			select @result_id = -1 -- Оплата по курсу уже внесена
		end

		commit transaction @tranName;
	end try
	begin catch
		rollback transaction @tranName;
		select @result_id = -2;
	end catch]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[price]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[module].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@discount_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_balance].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@balance].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@balance].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[fn_get_currency_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payment_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payments].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payments].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[module_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[payment_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[payment].[payment_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payment_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@result_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[change_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_money_hystory].[income_value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payments].[currency_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_payment_for_module_add].[@payments].[value]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_payment_for_module_add].[@payments]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_module_add].[@payments].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_module_add].[@payments].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Scale" Value="2" />
												<Property Name="Precision" Value="18" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_payment_for_module_add].[@balance]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_module_add].[@balance].[currency_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_payment_for_module_add].[@balance].[value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Scale" Value="2" />
												<Property Name="Precision" Value="18" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@module_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@payment_date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@currency_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@payment_value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="2" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@discount_rate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Scale" Value="8" />
									<Property Name="Precision" Value="18" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_payment_for_module_add].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="73" />
				<Property Name="Length" Value="3976" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Description: Внесение оплаты за модуль&#xD;&#xA;-- Change Date: 01.06.2013&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_payment_for_module_add]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@module_id int,&#xD;&#xA;&#x9;@payment_date datetime,&#xD;&#xA;&#x9;@currency_id int,&#xD;&#xA;&#x9;@payment_value decimal(18, 2),&#xD;&#xA;&#x9;@discount_rate decimal(18, 8),&#xD;&#xA;&#x9;@result_id int output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_picture_get]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
SELECT picture.data FROM picture WHERE id = @picture_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[picture]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[picture].[data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[picture].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_picture_get].[@picture_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_picture_get].[@picture_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="118" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_picture_get]&#xD;&#xA;&#x9;@picture_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_picture_update]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	insert into dbo.picture
		(data)
	values (@picture_data)

	select @result_id = SCOPE_IDENTITY()]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[picture]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[picture].[data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_picture_update].[@picture_data]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_picture_update].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_picture_update].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_picture_update].[@picture_data]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_picture_update].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="223" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_picture_update]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@picture_data varbinary(max),&#xD;&#xA;&#x9;@result_id int output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_rating_update]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	update dbo.rating
	set
		value = @value
	where 
		target_element = @target_element
		and account_id = @account_id

	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.rating
			(account_id, target_element, value)
		values 
			(@account_id, @target_element, @value)
	end

	declare @countOfItems float;
	declare @sumOfItems float;

	select @countOfItems = count(*),
		   @sumOfItems = SUM(value)
	from dbo.rating r
	where target_element = @target_element
		and account_id is not null;

	update dbo.rating
	set
		value = @sumOfItems / @countOfItems
	where
		account_id is null
		and target_element = @target_element
	
	if @@ROWCOUNT = 0
	begin
		insert into dbo.rating
		(account_id, target_element, value)
		values (null, @target_element, convert(float, @sumOfItems) / @countOfItems)
	end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_rating_update].[@value]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_rating_update].[@target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[rating].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_rating_update].[@account_id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_rating_update].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_rating_update].[@target_element]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_rating_update].[@value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="103" />
				<Property Name="Length" Value="1038" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.20&#xD;&#xA;-- Description: обновляет рейтинг, выставленный пользователем для курса&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_rating_update]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@target_element uniqueidentifier,&#xD;&#xA;&#x9;@value float&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_site_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT id, url
FROM site
ORDER BY id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[site]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[site].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[site].[url]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="80" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_site_get&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100MultiStatementTableValuedFunction" Name="[dbo].[pr_split_string]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="ReturnTableVariable" Value="@Results" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[@String]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[@Delimiter]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_split_string].[Ordinal]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_split_string].[StringValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="ISqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
begin

    set @String = isnull(@String,'')
    set @Delimiter = isnull(@Delimiter,'')

    declare
     @TempString varchar(max) = @String
    ,@Ordinal int = 0
    ,@CharIndex int = 0

    set @CharIndex = charindex(@Delimiter, @TempString)
    while @CharIndex != 0 begin     
        set @Ordinal += 1       
        insert @Results values
        (
         @Ordinal
        ,substring(@TempString, 0, @CharIndex)
        )       
        set @TempString = substring(@TempString, @CharIndex + 1, len(@TempString) - @CharIndex)     
        set @CharIndex = charindex(@Delimiter, @TempString)
    end

    if @TempString != '' begin
        set @Ordinal += 1 
        insert @Results values
        (
         @Ordinal
        ,@TempString
        )
    end

    return
end]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="975" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [dbo].[pr_split_string]&#xD;&#xA;(   &#xD;&#xA; @String varchar(max)&#xD;&#xA;,@Delimiter char&#xD;&#xA;)&#xD;&#xA;RETURNS @Results table&#xD;&#xA;(&#xD;&#xA; Ordinal int&#xD;&#xA;,StringValue varchar(max)&#xD;&#xA;)&#xD;&#xA;as" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_split_string].[@String]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_split_string].[@Delimiter]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_delete]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @owner int = null;
		select @owner = tv.account_id from tv
		where tv.id = @tv_id 

		if (@owner is not null)
		begin
			delete from tv_order
			where tv_order.account_id = @account_id
				and tv_order.tv_id = @tv_id

			if (0 = (select count(*) from dbo.tv_order where tv_id = @tv_id))
			begin
				begin try
					delete from tv
					where id = @tv_id
				end try
				begin catch
				end catch
			end
		end
		else
		begin
			update tv_order 
			set 
				order_in_list = -1
			where
				account_id = @account_id
				and tv_id = @tv_id

			if (@@ROWCOUNT = 0)
				insert into tv_order (account_id, tv_id, order_in_list)
				values (@account_id, @tv_id, -1);
		end
	end try
	begin catch
		select -1;
		return;
	end catch

	select 0;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_delete].[@tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_delete].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_delete].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_delete].[@tv_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="866" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_tv_delete]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@tv_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_get]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT t.account_id, t.image_url, t.is_editable, t.language_id, t.url, tl.[description], tl.name
FROM  tv t
INNER JOIN tv_language tl
ON tl.tv_id = t.id AND tl.language_id = @native_language_id
WHERE t.id = @id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="303" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_tv_get&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @native_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT t.id, t.url, t.image_url, tl.name, tl.[description], t.[is_editable], t.account_id
	,ISNULL(ord.order_in_list, 0) 'order_in_list'
FROM  tv t
INNER JOIN tv_language tl
ON tl.tv_id = t.id AND tl.language_id = @native_language_id
left join dbo.tv_order ord
on ord.tv_id = t.id and ord.account_id = @account_id
WHERE
	(
		ord.order_in_list is null
		or ord.order_in_list >= 0
	)
	and
	(
		(
			t.language_id = @learn_language_id
			and t.account_id is null
		)
		or 
		(
			t.account_id = @account_id
			and ord.order_in_list >= 0
		)
		or 
		(
			t.language_id = @learn_language_id
			and t.account_id <> @account_id
			and ord.order_in_list >= 0
		)
	)
ORDER BY t.id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_list].[@learn_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="829" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_tv_get_list&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_get_other_list]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[

SELECT t.id, t.url, t.account_id, t.image_url, tl.name, tl.description, t.[is_editable]	
FROM  tv t
INNER JOIN tv_language tl
ON tl.tv_id = t.id AND tl.language_id = @native_language_id
WHERE t.is_editable = 0
	and 
	(
		t.language_id = @learn_language_id
		and t.account_id is not null
		and t.account_id <> @account_id
		and 
		(
			not exists (
						select top 1 tv_id 
						from tv_order 
						where 
							order_in_list >= 0 
							and tv_order.account_id = @account_id
							and t.id = tv_order.tv_id
						)
		)
		or
		(
			t.account_id = @account_id
			and 
			(
				not exists (
							select top 1 tv_id 
							from tv_order 
							where 
								order_in_list >= 0 
								and tv_order.account_id = @account_id
								and t.id = tv_order.tv_id
							)
			)
		)
		or
		(
			t.language_id = @learn_language_id
			and t.account_id is null
			and exists (
						select top 1 tv_id 
						from tv_order 
						where 
							order_in_list < 0 
							and tv_order.account_id = @account_id
							and t.id = tv_order.tv_id
						)
		)
	)
ORDER BY t.id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_other_list].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_other_list].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_get_other_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_other_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_other_list].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_get_other_list].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1252" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_tv_get_other_list]&#xD;&#xA;(&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_update_or_insert]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @isEditableField bit;
	declare @accountIdField int;
	declare @existingTvId int;
	select @existingTvId = id, @isEditableField = is_editable, @accountIdField = account_id
	from dbo.tv
	where id = @id

	if @existingTvId is not null
		and 
		(
			@accountIdField <> @account_id
			or ISNULL(@isEditableField, 0) = 0
		)
	begin
		-- Нельзя редактировать данную запись, т.к.
		-- она не помечена на редактирование 
		-- или не пренадлежит текущему пользователю
		select -1;
		return;
	end
	
	update dbo.tv
	set
		--account_id = @account_id
		--,is_editable = @is_editable
		image_url = @image_url
		,url = @url
		,language_id = @language_id
	where 
		id = @id

	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.tv
			(account_id, image_url, is_editable, language_id, url)
		values
			(@account_id, @image_url, 1, @language_id, @url)
		select @id = SCOPE_IDENTITY()

		insert into dbo.tv_order
			(order_in_list, tv_id, account_id)
		values
			--( (
			--	select case when MAX(order_in_list) > 0 then MAX(order_in_list) else 0 end
			--	from dbo.tv_order ord
			--	where ord.account_id = @account_id
			--  )
			--, @id)
			(0, @id, @account_id)
	end

	update dbo.tv_language
	set
		[description] = @description
		,name = @name
	where 
		tv_id = @id
		and language_id = @native_language_id
	if (@@ROWCOUNT = 0)
	begin
		insert into dbo.tv_language
			(tv_id, language_id, [description], name)
		values
			(@id, @native_language_id, @description, @name)
	end

	select @id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[is_editable]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@image_url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@url]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@description]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@name]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_or_insert].[@native_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@image_url]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@description]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_or_insert].[@is_editable]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1791" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_tv_update_or_insert]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;    @language_id int,&#xD;&#xA;&#x9;@native_language_id int,&#xD;&#xA;&#x9;@id int,&#xD;&#xA;&#x9;@url nvarchar(max),&#xD;&#xA;&#x9;@image_url nvarchar(max), &#xD;&#xA;&#x9;@name nvarchar(max), &#xD;&#xA;&#x9;@description nvarchar(max),&#xD;&#xA;&#x9;@is_editable bit&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_tv_update_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	begin try
		declare @orderingTableTemp table(tv_id int, order_index int);
		insert into @orderingTableTemp
		select convert(int, LEFT(f.StringValue, charindex('=', f.StringValue) - 1))
			   , convert(int, RIGHT(f.StringValue, LEN(f.StringValue) - charindex('=', f.StringValue)))
		from dbo.pr_split_string(@ordering_string, ';') f
	
		declare mycursor cursor
		for
		select tv_id, order_index
		from @orderingTableTemp

		declare @tv_id int;
		declare @order_index int;

		open mycursor

		fetch next from mycursor
		into 
		@tv_id,
		@order_index

		while (@@FETCH_STATUS = 0)
		begin
			update dbo.tv_order
			set
				order_in_list = @order_index
			where
				account_id = @account_id
				and tv_id = @tv_id

			if (@@ROWCOUNT = 0)
				insert into tv_order (account_id, tv_id, order_in_list)
				values (@account_id, @tv_id, @order_index)

			fetch next from mycursor
			into 
			@tv_id,
			@order_index
		end
		select 0;
	end try
	begin catch
		select -1;
	end catch

	close mycursor
	deallocate mycursor]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_order].[@ordering_string]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_split_string].[StringValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_order].[@orderingTableTemp].[tv_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_order].[@orderingTableTemp].[order_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[order_in_list]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_tv_update_order].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[tv_order].[tv_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_tv_update_order].[@orderingTableTemp]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_tv_update_order].[@orderingTableTemp].[tv_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_tv_update_order].[@orderingTableTemp].[order_index]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_order].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_tv_update_order].[@ordering_string]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1156" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_tv_update_order]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@ordering_string varchar(max)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_comment_add]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @answer_level int
	set @answer_level = 0
	if (@parent_comment_id IS NOT NULL)
	begin
		declare @parent_answer_level int;
		select @parent_answer_level = answer_level + 1 from dbo.user_comment where id = @parent_comment_id;
		select @answer_level = case when @parent_answer_level > 4 then 4 else @parent_answer_level end;
	end

	insert into dbo.user_comment 
		(account_id, 
		answer_level, 
		claims_count, 
		comment_text, 
		target_element, 
		created_date, 
		rating)
	values
		(@account_id,
		@answer_level,
		0,
		@comment_text,
		@target_element,
		@created_date,
		0
		);
	select @result_id = SCOPE_IDENTITY()]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@parent_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[answer_level]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[claims_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[comment_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[created_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@comment_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@created_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_add].[@result_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@target_element]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@comment_text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@created_date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@parent_comment_id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_add].[@result_id]">
						<Property Name="IsOutput" Value="True" />
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="224" />
				<Property Name="Length" Value="1102" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.21&#xD;&#xA;-- Description: хранимка добавления комментария.&#xD;&#xA;--   При указании корневого id комментария, на который будет дан ответ, &#xD;&#xA;--   значение уровня ответа вычисляется как уровень_предыдущего + 1.&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_user_comment_add]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@target_element uniqueidentifier,&#xD;&#xA;&#x9;@comment_text nvarchar(500), &#xD;&#xA;&#x9;@created_date datetime,&#xD;&#xA;&#x9;@parent_comment_id int = null,&#xD;&#xA;&#x9;@result_id int = null output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_comment_claim]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	update user_comment_rates_and_claims
	set
		is_claimed = 1
	where
		account_id = @account_id
		and user_comment_id = @user_comment_id
	
	if (@@ROWCOUNT = 0)
	begin
		insert into user_comment_rates_and_claims 
			(account_id, is_claimed, is_positive_rate, is_rated, user_comment_id)
		values(@account_id, 1, 0, 0, @user_comment_id)
	end

	update user_comment
	set
		claims_count = claims_count + 1
	where id = @user_comment_id

	select 1;]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_claimed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_claim].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[user_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_claim].[@user_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_positive_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_rated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[claims_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_claim].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_claim].[@user_comment_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="48" />
				<Property Name="Length" Value="599" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- записывает &quot;жалобу&quot; на определнный комент&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_user_comment_claim]&#xD;&#xA;&#x9;@account_id int,&#xD;&#xA;&#x9;@user_comment_id int&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_comment_items_count]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	select count(id) from dbo.user_comment uc
	where uc.target_element = @target_element]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_items_count].[@target_element]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_items_count].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_items_count].[@target_element]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="199" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_user_comment_items_count]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@target_element uniqueidentifier&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_comment_lst]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @startIndex int;
	set @startIndex = (@page_number - 1) * @page_size + 1;
	declare @endIndex int;
	set @endIndex = @page_number * @page_size;
	
	with commentCTE as
	(
		select uc.account_id
			,uc.answer_level
			,uc.claims_count
			,uc.comment_text
			,uc.target_element
			,uc.created_date
			,uc.id
			,uc.rating
			,row_number() over (order by uc.created_date desc) as rowNum
		from dbo.user_comment uc
		where uc.target_element = @target_element
	)

	select 
		*
		, acc.nick 'user_name' 
		--, (	
		--	select top 1 COUNT(*) 
		--	from user_comment_rates_and_claims 
		--	where user_comment_id = commentCTE.id
		--		and account_id = @account_id
		--  ) ''
	from commentCTE
	left join account acc
	on acc.id = commentCTE.account_id
	where rowNum between @startIndex and @endIndex
	order by commentCTE.created_date desc]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_lst].[@page_number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_lst].[@page_size]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[answer_level]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[claims_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[comment_text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[created_date]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_lst].[@target_element]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[dbo].[user_comment].[created_date]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[account_id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[account_id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[answer_level]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[answer_level]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[claims_count]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[claims_count]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[comment_text]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[comment_text]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[target_element]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[target_element]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[created_date]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[created_date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[rating]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[dbo].[user_comment].[rating]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql90ComputedColumn" Name="[dbo].[pr_user_comment_lst].[CTE1].[commentCTE].[rowNum]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_lst].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_lst].[@target_element]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_lst].[@page_size]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_lst].[@page_number]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="125" />
				<Property Name="Length" Value="1156" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- Change Date: 2013.05.21&#xD;&#xA;-- Description: хранимка получения комментариев&#xD;&#xA;--   параметр @page_number int считается с 1&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_user_comment_lst]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@target_element uniqueidentifier,&#xD;&#xA;&#x9;@page_size int,&#xD;&#xA;&#x9;@page_number int --страница считается с 1&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_comment_rate]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	if (not exists(
			select id 
			from user_comment_rates_and_claims urc 
			where urc.account_id = @account_id 
				and urc.user_comment_id = @user_comment_id)
		and not exists(
			select id
			from user_comment u
			where u.account_id = @account_id
				and u.id = @user_comment_id)
		)
	begin
		insert into user_comment_rates_and_claims 
			(account_id, is_claimed, is_positive_rate, is_rated, user_comment_id)
		values(@account_id, 0, @is_positive, 1, @user_comment_id)

		update user_comment
		set
			rating = rating + case when @is_positive = 1 then 1 else -1 end
		where
			id = @user_comment_id
	end

	select u.rating
	from user_comment u
	where id = @user_comment_id]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_rate].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[user_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_rate].[@user_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_claimed]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_positive_rate]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[is_rated]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment_rates_and_claims].[user_comment_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_comment_rate].[@is_positive]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[rating]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_comment].[rating]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_rate].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_rate].[@user_comment_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_comment_rate].[@is_positive]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="31" />
				<Property Name="Length" Value="844" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- задает рейтинг коменту&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [dbo].[pr_user_comment_rate]&#xD;&#xA;&#x9;@account_id int, &#xD;&#xA;&#x9;@user_comment_id int,&#xD;&#xA;&#x9;@is_positive bit&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_user_course_password_check_and_update]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Property Name="BodyScript">
				<Value><![CDATA[
	declare @current_course_password nvarchar(100);
	select @current_course_password = c.[password]
	from dbo.course c
	where c.id = @course_id

	declare @stored_password nvarchar(100);
	select @stored_password = u.[password]
	from dbo.user_password_for_course u
	where u.course_id = @course_id
		and u.[user_id] = @user_id

	if ((@current_course_password is null or @current_course_password = '') 
		and @current_course_password <> @stored_password)
	begin
		update dbo.user_password_for_course
		set
			[password] = @current_course_password
		where 
			[user_id] = @user_id
			and [course_id] = @course_id
		return 0;
	end

	if (@current_course_password <> @password)
	begin
		return -1;
	end
	else
	begin
		update dbo.user_password_for_course
		set
			[password] = @current_course_password
		where 
			[user_id] = @user_id
			and [course_id] = @course_id
		
		if (@@ROWCOUNT = 0)
		begin
			insert into dbo.user_password_for_course ([user_id], [course_id], [password])
			values (@user_id, @course_id, @current_course_password)
		end

		return 0;
	end]]></Value>
			</Property>
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[course].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_course_password_check_and_update].[@course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_course_password_check_and_update].[@user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[password]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[user_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[user_password_for_course].[course_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_user_course_password_check_and_update].[@password]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_course_password_check_and_update].[@user_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_course_password_check_and_update].[@course_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_user_course_password_check_and_update].[@password]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1226" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [dbo].[pr_user_course_password_check_and_update]&#xD;&#xA;&#x9;@user_id int, &#xD;&#xA;&#x9;@course_id int,&#xD;&#xA;&#x9;@password nvarchar(100)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_verb_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SET RowCount @word_count
SELECT v.id, v.form1, v.form2, v.form3, v.translation, v.verb_type_id
FROM verb v
LEFT JOIN account_verb av
ON av.verb_id = v.id AND av.account_id = @account_id
WHERE (@load_popular = 0 OR v.popular = 1) AND
(@not_use_well_known_verbs = 0 OR av.account_id IS NULL)
ORDER BY v.form1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[pr_verb_get_list].[@word_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[verb_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_verb].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_verb_get_list].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[form1]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[form2]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[form3]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[translation]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[verb_type_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_verb_get_list].[@load_popular]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb].[popular]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_verb_get_list].[@not_use_well_known_verbs]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_verb_get_list].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_verb_get_list].[@load_popular]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_verb_get_list].[@not_use_well_known_verbs]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_verb_get_list].[@word_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="465" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_verb_get_list&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @load_popular bit,&#xD;&#xA;    @not_use_well_known_verbs bit,&#xD;&#xA;    @word_count int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_verb_type_get_list]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT id, [rule]
FROM verb_type
ORDER BY id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[verb_type]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb_type].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[verb_type].[rule]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="94" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_verb_type_get_list&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_by_domain]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word TABLE
(
    number int IDENTITY (1, 1) NOT NULL,
    id int
)

INSERT INTO @word (id)
SELECT w.id
FROM word w
INNER JOIN domain_word dw
ON w.id = dw.word_id AND dw.domain_id = @domain_id
INNER JOIN word_language wl
ON w.id = wl.word_id AND wl.language_id = @learn_language_id
WHERE w.id NOT IN
    (SELECT word_id FROM account_word
     WHERE account_id = @account_id AND
     language_id = @learn_language_id)
ORDER BY wl.text

SELECT ww.word_id AS id, ww.text AS original, www.text AS [translation]
FROM @word w
INNER JOIN word_language ww
ON w.id = ww.word_id AND ww.language_id = @learn_language_id
INNER JOIN word_language www
ON w.id = www.word_id AND www.language_id = @native_language_id
AND w.number >= @word_start_index
AND w.number <  @word_start_index + @word_count
ORDER BY w.number]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[domain_word].[domain_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@domain_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@word].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@word_start_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_domain].[@word_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_word_get_by_domain].[@word]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_domain].[@word].[number]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_domain].[@word].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@domain_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@word_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@word_start_index]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_domain].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1045" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_by_domain&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @domain_id int,&#xD;&#xA;    @word_count int,&#xD;&#xA;    @word_start_index int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_by_id]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT ww.[text] AS original, www.[text] AS [translation]
FROM word_language ww
INNER JOIN word_language www
ON ww.word_id = www.word_id
AND ww.word_id = @id
AND ww.language_id = @learn_language_id
AND www.language_id = @native_language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_id].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_id].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_id].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_id].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_id].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_id].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="371" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_by_id&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_by_ordered]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word TABLE
(
    number int IDENTITY (1, 1) NOT NULL,
    id int
)

INSERT INTO @word (id)
SELECT w.id
FROM word w
INNER JOIN word_language wl
ON w.id = wl.word_id AND wl.language_id = @learn_language_id
INNER JOIN word_language wl2
ON w.id = wl2.word_id AND wl2.language_id = @native_language_id
WHERE w.id NOT IN
    (SELECT word_id FROM account_word
     WHERE account_id = @account_id AND
     language_id = @learn_language_id)
ORDER BY wl.text

SELECT ww.word_id AS id, ww.[text] AS original, www.text AS [translation]
FROM @word w
INNER JOIN word_language ww
ON w.id = ww.word_id AND ww.language_id = @learn_language_id
INNER JOIN word_language www
ON w.id = www.word_id AND www.language_id = @native_language_id
AND w.number >= @word_start_index
AND w.number <  @word_start_index + @word_count
ORDER BY w.number]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@word].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@word_start_index]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_ordered].[@word_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_word_get_by_ordered].[@word]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_ordered].[@word].[number]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_ordered].[@word].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_ordered].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_ordered].[@word_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_ordered].[@word_start_index]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_ordered].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_ordered].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="1043" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_by_ordered&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @word_count int,&#xD;&#xA;    @word_start_index int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_by_original]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word_id int

SET @word_id = (SELECT TOP 1 word_id
                FROM word_language
                WHERE language_id = @learn_language_id AND
                [text] = @original)

SELECT @word_id AS id, [text] AS [translation], 1 AS sounded
FROM word_language
WHERE language_id = @native_language_id AND word_id = @word_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_original].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_original].[@original]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_original].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_original].[@original]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_original].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_original].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="489" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_by_original&#xD;&#xA;(&#xD;&#xA;    @original nvarchar(254),&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_by_random]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word TABLE
(
    number int IDENTITY (1, 1) NOT NULL,
    id int
)

INSERT INTO @word (id)
SELECT w.id
FROM word w
INNER JOIN word_language wl
ON w.id = wl.word_id AND wl.language_id = @learn_language_id
INNER JOIN word_language wl2
ON w.id = wl2.word_id AND wl2.language_id = @native_language_id
WHERE w.id <= 18630 AND (w.id NOT IN
    (SELECT word_id
     FROM account_word
     WHERE account_id = @account_id AND
     language_id = @learn_language_id))
ORDER BY NEWID()

SELECT ww.word_id AS id, ww.text AS original, www.text AS [translation]
FROM @word w
INNER JOIN word_language ww
ON w.id = ww.word_id AND ww.language_id = @learn_language_id
INNER JOIN word_language www
ON w.id = www.word_id AND www.language_id = @native_language_id
AND w.number <= @word_count
ORDER BY w.number]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account_word].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@word].[number]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_by_random].[@word_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_word_get_by_random].[@word]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_random].[@word].[number]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_get_by_random].[@word].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_random].[@account_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_random].[@word_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_random].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_by_random].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="983" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_by_random&#xD;&#xA;(&#xD;&#xA;    @account_id int,&#xD;&#xA;    @word_count int,&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_count]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

declare @count1 int
set @count1 = (
	SELECT COUNT(*)
	FROM word_language
	WHERE language_id = @learn_language_id)

declare @count2 int
set @count2 = (
	SELECT COUNT(*)
	FROM word_language
	WHERE language_id = @native_language_id)

IF @count1 < @count2
SELECT @count1
ELSE 
SELECT @count2]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_count].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_count].[@native_language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_count].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_count].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="410" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_word_get_count&#xD;&#xA;(&#xD;&#xA;    @learn_language_id int,&#xD;&#xA;    @native_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_count_sounded]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT COUNT(*) AS [count] FROM word]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="88" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_word_get_count_sounded&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_id_by_original]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT word_id AS id
FROM word_language
WHERE language_id = @language_id AND
[text] = @original]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_original].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_original].[@original]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_id_by_original].[@original]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_id_by_original].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="213" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_id_by_original&#xD;&#xA;(&#xD;&#xA;    @original nvarchar(254),&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_id_by_text]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 1 word_id AS id
FROM word_language
WHERE language_id = @language_id AND
[text] = @text]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_text].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_id_by_text].[@text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_id_by_text].[@text]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_id_by_text].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="207" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_id_by_text&#xD;&#xA;(&#xD;&#xA;    @text nvarchar(254),&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_list_unsounded_short]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT DISTINCT w.id--, wl.text, wwl.text
FROM word w
INNER JOIN word_language wl
ON w.id = wl.word_id AND wl.language_id = @native_language_id
INNER JOIN word_language wwl
ON w.id = wwl.word_id AND wwl.language_id = @learn_language_id
WHERE w.[id] > 18656
AND LEN(wl.text) < 21
AND CHARINDEX('''', wl.text) = 0
AND CHARINDEX('-', wl.text) = 0
AND CHARINDEX(' ', wl.text) = 0
AND CHARINDEX('.', wl.text) = 0
AND LEN(wwl.text) < 21
AND CHARINDEX('''', wwl.text) = 0
AND CHARINDEX('-', wwl.text) = 0
AND CHARINDEX(' ', wwl.text) = 0
AND CHARINDEX('.', wwl.text) = 0
ORDER BY w.[id]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_list_unsounded_short].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_list_unsounded_short].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_list_unsounded_short].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_list_unsounded_short].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="723" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_list_unsounded_short&#xD;&#xA;(&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_get_sound_by_id]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT NULL AS original_sound, NULL AS translation_sound
FROM word WHERE id = @id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_get_sound_by_id].[@id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_get_sound_by_id].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="155" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_get_sound_by_id&#xD;&#xA;(&#xD;&#xA;    @id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_ins]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word_id int

INSERT INTO word DEFAULT VALUES
SET @word_id = SCOPE_IDENTITY()

INSERT INTO word_language
(language_id, word_id, [text])
VALUES (@learn_language_id, @word_id, @original)

IF (@native_language_id <> @learn_language_id)
    BEGIN
        INSERT INTO word_language
        (language_id, word_id, [text])
        VALUES (@native_language_id, @word_id, @translation)
    END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins].[@original]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins].[@translation]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins].[@original]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins].[@translation]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="575" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_ins&#xD;&#xA;(&#xD;&#xA;    @original nvarchar(254),&#xD;&#xA;    @translation nvarchar(254),&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_ins_use_exist]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

DECLARE @word_id int

SET @word_id = (
    SELECT TOP 1 word_id
    FROM word_language
    WHERE language_id = @learn_language_id
    AND text = @original)
    
IF (@word_id IS NOT NULL)
    BEGIN
        INSERT INTO word_language
        (language_id, word_id, [text])
        VALUES (@native_language_id, @word_id, @translation)
    END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins_use_exist].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins_use_exist].[@original]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins_use_exist].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_ins_use_exist].[@translation]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins_use_exist].[@original]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins_use_exist].[@translation]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins_use_exist].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_ins_use_exist].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="530" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_ins_use_exist&#xD;&#xA;(&#xD;&#xA;    @original nvarchar(254),&#xD;&#xA;    @translation nvarchar(254),&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_order_get_random]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 1 sentence
FROM word_order
WHERE language_id = @language_id
ORDER BY NEWID()]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_order]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order].[sentence]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_get_random].[@language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_get_random].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="169" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_word_order_get_random&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_order_quiz_get_place]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

IF ((SELECT COUNT(*)  FROM word_order_quiz) >= 100) DELETE FROM word_order_quiz

INSERT INTO word_order_quiz(account_id, nick, result, language_id)
VALUES(@account_id, @nick, @success_count, @language_id)

DECLARE @id int
SET @id = (SELECT SCOPE_IDENTITY())

DECLARE @places TABLE
(
    place int IDENTITY (1, 1) NOT NULL,
    id int,
    account_id int,
    nick nvarchar(20),
    result int,
    language_id int
)

INSERT INTO @places (id, account_id, nick, result, language_id)
SELECT id, account_id, nick, result, language_id
FROM word_order_quiz
WHERE language_id = @language_id
ORDER BY result DESC, id DESC

SELECT TOP 1 place
FROM @places
WHERE id = @id

DELETE wq
FROM word_order_quiz wq
INNER JOIN @places p
ON wq.id = p.id
WHERE p.place > 100 AND wq.language_id = @language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@success_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_word_order_quiz_get_place].[@places]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[place]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[account_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[nick]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[result]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_order_quiz_get_place].[@places].[language_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_quiz_get_place].[@account_id]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_quiz_get_place].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_quiz_get_place].[@success_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_quiz_get_place].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="979" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE pr_word_order_quiz_get_place&#xD;&#xA;(&#xD;&#xA;    @account_id int = null,&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @success_count int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_order_quiz_get_top]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 100
ISNULL(a.nick, q.nick) as nick,
q.result as result
FROM word_order_quiz q
LEFT JOIN account a
ON a.[id] = q.account_id
WHERE q.language_id = @language_id
ORDER BY result DESC, q.id DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_order_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_order_quiz_get_top].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_order_quiz].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_order_quiz_get_top].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="288" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_word_order_quiz_get_top&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_quiz_get_place]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

IF ((SELECT COUNT(*)  FROM word_quiz) >= 100) DELETE FROM word_quiz

INSERT INTO word_quiz(account_id, nick, result, language_id)
VALUES(@account_id, @nick, @success_count, @language_id)

DECLARE @id int
SET @id = (SELECT SCOPE_IDENTITY())

DECLARE @places TABLE
(
    place int IDENTITY (1, 1) NOT NULL,
    id int,
    account_id int,
    nick nvarchar(20),
    result int,
    language_id int
)

INSERT INTO @places (id, account_id, nick, result, language_id)
SELECT id, account_id, nick, result, language_id
FROM word_quiz
WHERE language_id = @language_id
ORDER BY result DESC, id DESC

SELECT TOP 1 place
FROM @places
WHERE id = @id

DELETE wq
FROM word_quiz wq
INNER JOIN @places p
ON wq.id = p.id
WHERE p.place > 100 AND wq.language_id = @language_id]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@success_count]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_place].[@places].[place]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[language_id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="ISqlDynamicColumnSource" Name="[dbo].[pr_word_quiz_get_place].[@places]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[place]">
									<Property Name="IsNullable" Value="False" />
									<Property Name="IsIdentity" Value="True" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[account_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[nick]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Property Name="Length" Value="20" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[result]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="ISql100SimpleColumn" Name="[dbo].[pr_word_quiz_get_place].[@places].[language_id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="ISql90TypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_quiz_get_place].[@account_id]">
						<Property Name="DefaultExpressionScript">
							<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_quiz_get_place].[@nick]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_quiz_get_place].[@success_count]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_quiz_get_place].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="945" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE pr_word_quiz_get_place&#xD;&#xA;(&#xD;&#xA;    @account_id int = null,&#xD;&#xA;    @nick nvarchar(20),&#xD;&#xA;    @success_count int,&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_quiz_get_top]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

SELECT TOP 100
ISNULL(a.nick, q.nick) as nick,
q.result as result
FROM word_quiz q
LEFT JOIN account a
ON a.[id] = q.account_id
WHERE q.language_id = @language_id
ORDER BY result DESC, q.id DESC]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_quiz]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[account_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[account].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[nick]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[result]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_quiz_get_top].[@language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_quiz].[id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_quiz_get_top].[@language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="4" />
				<Property Name="Length" Value="279" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;&#xD;&#xA;CREATE  PROCEDURE pr_word_quiz_get_top&#xD;&#xA;(&#xD;&#xA;    @language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Procedure" Name="[dbo].[pr_word_upd]">
			<Property Name="BodyScript">
				<Value QuotedIdentifiers="True" AnsiNulls="True"><![CDATA[

UPDATE word_language
SET [text] = @original
WHERE word_id = @id AND language_id = @learn_language_id

IF (@native_language_id <> @learn_language_id)
    BEGIN
        UPDATE word_language
        SET [text] = @translation
        WHERE word_id = @id AND language_id = @native_language_id
    END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[text]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_upd].[@original]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[word_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_upd].[@id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[word_language].[language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_upd].[@learn_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_upd].[@native_language_id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[pr_word_upd].[@translation]" />
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_upd].[@id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_upd].[@original]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_upd].[@translation]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_upd].[@native_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SubroutineParameter" Name="[dbo].[pr_word_upd].[@learn_language_id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="485" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE dbo.pr_word_upd&#xD;&#xA;(&#xD;&#xA;    @id int,&#xD;&#xA;    @original varchar(254),&#xD;&#xA;    @translation varchar(254),&#xD;&#xA;    @native_language_id int,&#xD;&#xA;    @learn_language_id int&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[rating]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[rating].[target_element]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[rating].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[rating].[value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[site]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[site].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[site].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[tv]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[image_url]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[url]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="2000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv].[is_editable]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="7" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[tv_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_language].[tv_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_language].[name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_language].[description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[tv_language].[IX_tv_language_name]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[tv_language].[name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[tv_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[tv_order]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_order].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_order].[tv_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_order].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[tv_order].[order_in_list]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="26" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[user_comment]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[comment_text]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="500" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[target_element]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[created_date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[rating]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="14" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[claims_count]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="15" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment].[answer_level]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="16" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[user_comment_rates_and_claims]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[user_comment_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[account_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[is_claimed]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[is_rated]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_comment_rates_and_claims].[is_positive_rate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[user_password_for_course]">
			<Property Name="IsQuotedIdentifierOn" Value="False" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_password_for_course].[user_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_password_for_course].[course_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[user_password_for_course].[password]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[verb]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[form1]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="40" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[form2]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="40" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[form3]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="40" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[translation]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[popular]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb].[verb_type_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[verb_type]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb_type].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[verb_type].[rule]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[word]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[word_language]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_language].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_language].[word_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_language].[text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="254" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Index" Name="[dbo].[word_language].[IX_word_language_text]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="ISqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[dbo].[word_language].[text]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[dbo].[word_language]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[word_order]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order].[sentence]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="150" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[word_order_quiz]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order_quiz].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order_quiz].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order_quiz].[nick]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order_quiz].[result]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_order_quiz].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql100Table" Name="[dbo].[word_quiz]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_quiz].[id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_quiz].[account_id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_quiz].[nick]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_quiz].[result]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[tinyint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="ISql100SimpleColumn" Name="[dbo].[word_quiz].[language_id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="ISql90TypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Owner">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90File" Name="[wordz_Data]">
			<Property Name="FileName" Value="$(Path2)$(DatabaseName).mdf" />
			<Property Name="Size" Value="69632" />
			<Property Name="SizeUnit" Value="3" />
			<Property Name="FileGrowth" Value="10240" />
			<Property Name="FileGrowthUnit" Value="3" />
			<Relationship Name="Filegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90File" Name="[wordz_Log]">
			<Property Name="FileName" Value="$(Path1)$(DatabaseName)_Log.LDF" />
			<Property Name="Size" Value="245952" />
			<Property Name="SizeUnit" Value="3" />
			<Property Name="FileGrowth" Value="10" />
			<Property Name="FileGrowthUnit" Value="1" />
			<Property Name="IsLogFile" Value="True" />
		</Element>
		<Element Type="ISql90Schema" Name="[wordz_user]" Disambiguator="5">
			<Relationship Name="Authorizer">
				<Entry>
					<References Name="[wordz_user]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90User" Name="[wordz_user]">
			<Property Name="IsWithoutLogin" Value="True" />
			<Relationship Name="DefaultSchema">
				<Entry>
					<References Name="[wordz_user]" Disambiguator="5" />
					<Annotation Type="PersistedResolvableAnnotation" Name="[wordz_user]">
						<Property Name="TargetTypeStorage" Value="ISql90Schema" />
					</Annotation>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90Role" Name="[wordz_users]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="ISql90Schema" Name="[wordz_users]" Disambiguator="4">
			<Relationship Name="Authorizer">
				<Entry>
					<References Name="[wordz_users]" />
				</Entry>
			</Relationship>
		</Element>
	</Model>
</DataSchemaModel>